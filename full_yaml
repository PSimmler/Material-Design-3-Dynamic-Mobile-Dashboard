kiosk_mode:
  mobile_settings:
    hide_header: true
    ignore_entity_settings: true
    custom_width: 768
swipe_nav:
  animate: swipe
  enable_on_subviews: false    
decluttering_templates:
  mushroom_title_card:
    default:
      - title: ''
    card:
      type: custom:mushroom-title-card
      title: '[[title]]'
      card_mod:
        style: |
          ha-card {
            --title-font-size: 20px !important;
          }
  mushroom_room_title_card:
    default:
      - title: ''
    card:
      type: custom:mushroom-title-card
      title: '[[title]]'
      card_mod:
        style: |
          ha-card {
            --title-font-size: 35px !important;
          }          
  mushroom_title_subtitle_card:
    default:
      title: ''
      subtitle: ''
    card:
      type: custom:mushroom-title-card
      title: '[[title]]'
      subtitle: '[[subtitle]]'
      card_mod:
        style: |
          ha-card {
            --title-font-size: 20px !important;
            --subtitle-font-size: 14px !important;
          }
  mushroom_overview_card:
    default:
      title: ''
      subtitle: ''
    card:
      type: custom:mushroom-title-card
      title: '[[title]]'
      subtitle: '[[subtitle]]'
      card_mod:
        style: |
          ha-card {
            --subtitle-font-size: 13px !important;
          }                  
  temperature_entity:
    default:
      - title: ''
    card:
      type: entities
      card_mod:
        style: |
          ha-card {
            border-radius: 16px;      /* rounded card */
            overflow: hidden;         /* clip row backgrounds */
            padding: 0;               /* remove default gaps */
          }
          .card-content {
            padding: 0 !important;    /* kill inner padding */
          }
      entities:
        - entity: '[[entity]]'
          name: '[[name]]'
          icon: '[[icon]]'
          card_mod:
            style: |
              hui-generic-entity-row {
                {% set temp = states('[[entity]]') | float %}
                {% set percent = ((temp + 10) / 50 * 100) | round(1) %}
                {% if temp < 16 %}
                  {% set rgb_light = '206,178,245' %}
                  {% set rgb_dark = '156,128,195' %}
                {% elif temp < 19 %}
                  {% set rgb_light = '163,217,245' %}
                  {% set rgb_dark = '113,167,195' %}
                {% elif temp < 22 %}
                  {% set rgb_light = '205,227,219' %}
                  {% set rgb_dark = '155,177,169' %}
                {% elif temp < 24 %}
                  {% set rgb_light = '251,217,160' %}
                  {% set rgb_dark = '201,167,110' %}
                {% elif temp < 27 %}
                  {% set rgb_light = '244,168,163' %}
                  {% set rgb_dark = '194,118,113' %}
                {% else %}
                  {% set rgb_light = '223,123,116' %}
                  {% set rgb_dark = '173,73,66' %}
                {% endif %}

                --rgb: {{ rgb_light }};
                --text-color: black !important;
                @media (prefers-color-scheme: dark) {
                  --rgb: {{ rgb_dark }};
                  --text-color: white !important;
                }

                background: linear-gradient(
                  95deg,
                  rgba(var(--rgb), 0.45) 0%,
                  rgba(var(--rgb), 0.45) {{percent}}%,
                  rgba(var(--rgb), 0.85) {{percent}}%,
                  rgba(12,14,18,0.42) 100%
                ),
                linear-gradient(
                  120deg,
                  rgba(255,255,255,0.02) 7%,
                  rgba(255,255,255,0.01) 13%,
                  rgba(255,255,255,0.00) 38%,
                  rgba(255,255,255,0.01) 47%,
                  rgba(255,255,255,0.00) 70%,
                  rgba(255,255,255,0.02) 82%,
                  rgba(255,255,255,0.00) 100%
                ),
                repeating-linear-gradient(
                  100deg,
                  rgba(255,255,255,0.011) 0 2px,
                  rgba(0,0,0,0.015) 2px 6px
                );
                
                /* Rounded corners */
                border-radius: 12px !important;
                margin: 4px 0 !important;
                overflow: hidden !important;
                
                /* Push value to the left */
                padding-right: 12px !important;   /* adds space on the right so the number is not cut */
              }
  humidity_entity:
    default:
      - title: ''
    card:
      type: entities
      card_mod:
        style: |
          ha-card {
            border-radius: 16px;      /* rounded card */
            overflow: hidden;         /* clip row backgrounds */
            padding: 0;               /* remove default gaps */
          }
          .card-content {
            padding: 0 !important;    /* kill inner padding */
          }
      entities:
        - entity: '[[entity]]'
          name: '[[name]]'
          icon: '[[icon]]'
          card_mod:
            style: |
              hui-generic-entity-row {
                {% set hum = states(config.entity) | float %}
                {% set percent = (hum if hum <= 100 else 100) | round(1) %}
                {% if hum < 31 %}
                  {% set rgb = '153,51,45' %}
                {% elif hum < 51 %}
                  {% set rgb = '34,139,34' %}
                {% else %}
                  {% set rgb = '153,51,45' %}
                {% endif %}

                --text-color: black !important;
                @media (prefers-color-scheme: dark) {
                  --text-color: white !important;
                }

                background:
                  linear-gradient(95deg,
                    rgba({{rgb}},0.13) 0%,
                    rgba({{rgb}},0.13) {{percent}}%,
                    rgba({{rgb}},0.55) {{percent}}%,
                    rgba(12,14,18,0.42) 100%
                  ),
                  linear-gradient(120deg, 
                    rgba(255,255,255,0.11) 7%, 
                    rgba(255,255,255,0.06) 13%, 
                    rgba(255,255,255,0.00) 38%,
                    rgba(255,255,255,0.08) 47%, 
                    rgba(255,255,255,0.00) 70%,
                    rgba(255,255,255,0.09) 82%,
                    rgba(255,255,255,0.00) 100%
                  ),
                  repeating-linear-gradient(100deg, rgba(255,255,255,0.011) 0 2px, rgba(0,0,0,0.015) 2px 6px);

                /* Rounded corners */
                border-radius: 12px !important;
                margin: 4px 0 !important;
                overflow: hidden !important;

                /* Push value to the left */
                padding-right: 12px !important;   /* adds space on the right so the number is not cut */                
              }
  room_summary_card:
    description: Primary room info (name + temp/humidity)
    variables:
      - room_name
      - temperature_sensor
      - humidity_sensor
      - navigation_path
    card:
      type: custom:mushroom-template-card
      primary: '[[room_name]]'
      secondary: >-
        {{ states('[[temperature_sensor]]') | round(1) }}Â°C / {{
        states('[[humidity_sensor]]') | round(1) }}%
      tap_action:
        action: navigate
        navigation_path: '[[navigation_path]]'
      hold_action:
        action: none
      double_tap_action:
        action: none
      card_mod:
        style:
          .: |
            ha-card {
              --primary-text-color: black;
              border: 0px;
              padding-left: 5px;
              padding-top: 5px;
              width: 500px;
            }
          mushroom-state-info$: |
            .container {
              --card-primary-color: var(--primary-text-color);
              --card-secondary-color: var(--primary-text-color);
            }
  light_chip_template:
    description: places chips to switch on/off individual lights
    variables:
      - entity
      - icon
    card:
      type: custom:mushroom-chips-card
      chips:
        type: template
        entity: [[entity]]
        tap_action:
          action: toggle
        icon: [[icon]]
        card_mod:
          style: |
            ha-card {
              --chip-background: {% if is_state([[entity]], 'on') %} #D3C890 {% else %} #353535 {% endif %};
              --color: {% if is_state([[entity]], 'on') %} #5b5326 {% else %} #dbdbdb {% endif %};
              justify-content: center;
              height: 35px !important;
              width: 35px !important;
              border: 0 !important;
              box-shadow: none !important;
              border-radius: 22px !important;
            }
    # This card_mod affects the container card (the "mushroom-chips-card" itself)
    card_mod:
      style: |
        .chip-container {
          flex-flow: column wrap-reverse !important;
          display: flex !important;
          --chip-spacing: 8px;
          margin: 12px;
        }
        .: |
        .container {
          align: end;
        }
  big_icon_toggle_card:
    description: Large horizontal icon toggle for switch/light
    variables:
      - entity
      - icon
    card:
      type: custom:mushroom-template-card
      entity: '[[entity]]'
      layout: horizontal
      icon: '[[icon]]'
      icon_color: |-
        {% if is_state(entity, 'on') %} 
          #ecce85
        {% else %}
          #5b5b5b
        {% endif %}      
      tap_action:
        action: toggle
      hold_action:
        action: none
      double_tap_action:
        action: none
      primary_info: none
      secondary_info: none
      card_mod:
        style:
          ha-tile-icon$: |
            .container {
              border: 0px;
              width: 120px !important;
              height: 120px !important;
              border-radius: 50% !important;
                }   
          .: |
            ha-tile-icon {
              --mdc-icon-size: 90px !important;
               }
            ha-card {
              border: none;
              margin-top: -8px !important;
              margin-left: -24px !important;
               }
  media_player_card:
    default:
      - icon: m3of:play-circle
      - name: Media Player
      - tap_action: none
    card:
      type: custom:stack-in-card
      cards:
        - type: custom:mushroom-media-player-card
          entity: '[[entity]]'
          icon: '[[icon]]'
          name: '[[name]]'
          use_media_info: true
          use_media_artwork: false
          show_volume_level: false
          media_controls:
            - play_pause_stop
            - previous
            - next
          volume_controls:
            - volume_buttons
            - volume_set
          fill_container: false
          collapsible_controls: true
          tap_action:
            action: '[[tap_action]]'
          layout: vertical
          card_mod:
            style:
              mushroom-media-player-volume-control$: |
                mushroom-slider {
                  --main-color: var(--md-sys-color-primary) !important;
                  --bg-color: color-mix(in srgb, var(--md-sys-color-primary) 70%, transparent) !important;
                }
              .: |
                mushroom-shape-icon {
                  display: flex;
                  {% set media_type = state_attr(config.entity, 'media_content_type') %}
                  {% if media_type == 'tvshow' %}
                    --card-mod-icon: mdi:television-classic;
                    animation: flicker 1s linear infinite alternate;
                  {% elif media_type == 'movie' %}
                    --card-mod-icon: mdi:movie-roll;
                    animation: spin 2s linear infinite reverse;
                  {% elif media_type == 'music' %}
                    --card-mod-icon: m3of:music-note;
                    animation: beat 1.3s ease-out infinite both;
                  {% elif media_type == 'playlist' %}
                    --card-mod-icon: m3of:music-note;
                    animation: beat 1.3s ease-out infinite both;
                  {% else %}
                    --card-mod-icon: m3of:play-circle;
                  {% endif %}

                  {{ 'animation: none;' if not is_state(config.entity, 'playing') }}

                }
                @keyframes flicker {
                  0%, 31.98%, 32.98%, 34.98%, 36.98%, 39.98%, 67.98%, 68.98%, 95.98%, 96.98%, 97.98%, 98.98%, 100% { --icon-color: rgba(var(--album-art-color), 1); }
                  32%, 33%, 35%, 36%, 37%, 40%, 68%, 69%, 96%, 97%, 98%, 99% { --icon-color: rgba(var(--album-art-color), 0.6); }
                }
                @keyframes beat {
                  0%, 60% { --icon-symbol-size: 21px; }
                  5%, 17%, 57% { --icon-symbol-size: 22px; }
                  10%, 20%, 51% { --icon-symbol-size: 23px; }
                  25%, 45% { --icon-symbol-size: 24px; }
                  30%, 39% { --icon-symbol-size: 25px; }
                  33% { --icon-symbol-size: 26px; }
                }
                .: |
                  mushroom-shape-icon {

                    /* Change media player icon based on media type */
                    {% set media_type = state_attr(config.entity, 'media_content_type') %}
                    --card-mod-icon:
                    {% if media_type == 'tvshow' %}
                       mdi:television-classic
                    {% elif media_type == 'movie' %}
                      mdi:movie-roll
                    {% elif media_type == 'music' %}
                      m3of:music-note
                    {% elif media_type == 'playlist' %}
                      m3of:music-note
                    {% else %}
                      m3of:play-circle
                    {% endif %};
                  }
                  ha-card {

                    /* Remove border from media player */
                    --ha-card-border-width: 0;

                    /* Apply album art color to media player icon & volume bar */
                    --rgb-state-media-player: var(--album-art-color);

                    /* Disable transitions */
                    transition: all 0s;
                  }
                  .actions {

                    /* Apply to controls only when active */
                    {% if is_state(config.entity, ['playing', 'paused']) %}

                      /* Apply album art color to media player controls */
                      --rgb-primary-text-color: var(--rgb-primary-text-color);
                      --primary-text-color: var(--rgb-primary-text-color));

                      /* Add space for progress bar */
                      padding-top: 24px;
                    {% endif %}
                  }
        - entity: '[[entity]]'
          hide:
            icon: true
            name: true
            runtime: true
            source: true
            power: true
            state_label: true
            volume: true
            info: true
            progress: false
            controls: true
          more_info: false
          type: custom:mini-media-player
          toggle_power: false
          group: true
          card_mod:
            style: |
              ha-card {
                
                /* Move progress bar up into gap */
                bottom: calc(3 * var(--mush-spacing, 12px) + var(--mush-control-height, -25px));
                
                /* Correct margins for progress bar */
                margin: 0px calc(1.618 * var(--mush-spacing, 12px)) calc(-1 * var(--mush-spacing, 12px));

                /* Set height of card to match pregress bar height */
                height: var(--mmp-progress-height);

                /* Remove border outline */
                --ha-card-border-width: 0;

                /* Round corners of progress bar */
                --mmp-border-radius: var(--control-border-radius, 12px) !important;

                /* Set height of progress bar */
                --mmp-progress-height: var(--mush-spacing, 12px) !important;

                /* Make progress bar adjust to use dynamic theming */
                --mmp-accent-color: var(--md-sys-color-tertiary) !important;

                /* Remove transitions to prevent progress bar floating in */
                transition: all 0s;
              }
      card_mod:
        style: |
          ha-card:before {
            content: "";
            
            /* Position and size background color */
            position: absolute;
            height: 100%;
            width: 100%;

            /* Apply background to media player using album art color */
            {% if is_state('[[entity]]', ['playing', 'paused']) %}
              background: color-mix(in srgb, var(--md-sys-color-on-primary) 50%, transparent);
            {% endif %}
            
          }
          ha-card {

            /* Apply blended album art background */
            {% if is_state('[[entity]]', ['playing', 'paused']) %}
              background: url( '{{ state_attr("[[entity]]", "entity_picture") }}' ) no-repeat, 
                          linear-gradient(to left, transparent, rgb(var(--rgb-card-background-color)) 70%);

              /* Adjust for different aspect ratio of TV shows episode art */
              {% if state_attr('[[entity]]', 'media_content_type') == 'tvshow' %}
                background-size: 50% 100%, cover;
              {% else %}
                background-size: 50% auto, cover;
              {% endif %}

              /* Position art on right side */
              background-position: right;

              /* Blend art with background using saturation */
              background-blend-mode: saturation;
            {% endif %}
          }
views:
  - title: Overview
    header:
      card:
        type: horizontal-stack
        cards:
          - type: custom:decluttering-card
            template: mushroom_overview_card
            variables:
              - subtitle: '{{ now().strftime(''%a %b %-d - %I:%M %p'') }}'
          - type: custom:mushroom-chips-card
            chips:
              - type: conditional
                conditions:
                  - condition: state
                    entity: sensor.latest_nearby_quake
                    state_not: No quake
                chip:
                  type: template
                  entity: sensor.latest_nearby_quake
                  tap_action:
                    action: navigate
                    navigation_path: '#earthquake-warning'
                  icon: m3of:globe-location-pin
                  icon_color: >
                    {% set mag = state_attr('sensor.latest_nearby_quake',
                    'magnitude') | float(0) %} {% if mag >= 6.0 %} #D32F2F {%
                    elif mag >= 5.0 %} #F4511E {% elif mag >= 4.0 %} #FB8C00 {%
                    elif mag >= 3.0 %} #F9A825 {% elif mag >= 2.0 %} #FBC02D {%
                    else %} #388E3C {% endif %}
              - type: conditional
                conditions:
                  - condition: numeric_state
                    entity: sensor.volcano_rotorua
                    above: 0
                chip:
                  type: template
                  entity: sensor.volcano_rotorua
                  tap_action:
                    action: navigate
                    navigation_path: '#volcano-warning'
                  icon: m3of:mountain-steam
                  icon_color: |
                    {% set level = states('sensor.volcano_rotorua') | int %}
                    {% if level == 5 %} red
                    {% elif level == 4 %} deep-orange
                    {% elif level == 3 %} orange
                    {% elif level == 2 %} amber
                    {% elif level == 1 %} yellow
                    {% else %} green
                    {% endif %}
              - type: conditional
                conditions:
                  - condition: state
                    entity: sensor.home_metservice_weather_warnings
                    state_not: unknown
                chip:
                  type: template
                  entity: sensor.home_metservice_weather_warnings
                  tap_action:
                    action: navigate
                    navigation_path: '#weather-warning'
                  icon: m3of:warning
                  icon_color: orange
              - type: conditional
                conditions:
                  - entity: alarm_control_panel.alarmo
                    state: triggered
                chip:
                  type: template
                  entity: alarm_control_panel.alarmo
                  content: Triggered
                  tap_action:
                    action: navigate
                    navigation_path: '#alarmo'
                  icon: m3of:notifications-active
                  icon_color: '#d14f3a'
              - type: conditional
                conditions:
                  - entity: alarm_control_panel.alarmo
                    state: armed_away
                chip:
                  type: template
                  entity: alarm_control_panel.alarmo
                  content: Armed away
                  tap_action:
                    action: navigate
                    navigation_path: '#alarmo'
                  icon: mdi:shield-lock
                  icon_color: '#69ac5a'
              - type: conditional
                conditions:
                  - entity: alarm_control_panel.alarmo
                    state: arming
                chip:
                  type: template
                  entity: alarm_control_panel.alarmo
                  content: Arming
                  tap_action:
                    action: navigate
                    navigation_path: '#alarmo'
                  icon: mdi:shield
                  icon_color: '#efa340'
              - type: conditional
                conditions:
                  - entity: alarm_control_panel.alarmo
                    state: pending
                chip:
                  type: template
                  entity: alarm_control_panel.alarmo
                  content: Pending
                  tap_action:
                    action: navigate
                    navigation_path: '#alarmo'
                  icon: mdi:shield-outline
                  icon_color: '#efa340'
              - type: conditional
                conditions:
                  - entity: alarm_control_panel.alarmo
                    state: disarmed
                chip:
                  type: template
                  entity: alarm_control_panel.alarmo
                  tap_action:
                    action: navigate
                    navigation_path: '#alarmo'
                  icon: mdi:shield-off
                  icon_color: '#disarmed'
              - type: template
                entity: sensor.active_notification_count
                icon: m3of:notifications
                tap_action:
                  action: navigate
                  navigation_path: '#notifications'
                hold_action:
                  action: none
                card_mod:
                  style: >
                    ha-card {
                      position: relative;
                    }


                    {% set notifications =
                    states('sensor.active_notification_count') | int %}

                    {% if notifications > 0 %}

                    ha-card:after {
                      content: "{{ notifications }}";
                      position: absolute;
                      top: -3px;
                      right: -3px;
                      background-color: var(--md-sys-color-primary);
                      color: var(--md-sys-color-on-primary);
                      border-radius: 50%;
                      width: 16px;
                      height: 16px;
                      font-size: 10px;
                      line-height: 16px;
                      text-align: center;
                      display: inline-block;
                      font-weight: bold;
                    } {% endif %}
            alignment: end
            card_mod:
              style: |
                ha-card {
                  margin-top: 1.2em
                }
      layout: responsive
      badges_position: bottom
      badges_wrap: wrap
    type: sections
    max_columns: 4
    path: overview
    sections:
      - type: grid
        cards:
          - type: custom:mushroom-title-card
            title: |
              {% set time = now().hour %} {% if time >= 18 %}
                ð Guten Abend, {{ user }}!
              {% elif time >= 12 %}
                âï¸ Guten Nachmittag, {{ user }}!
              {% elif time >= 5 %}
                ð Guten Morgen, {{ user }}!
              {% else %}
                ð Hallo, {{ user }}!
              {% endif %}
            card_mod:
              style: |
                ha-card {
                  --title-font-size: 26px !important;
                }
          - type: custom:paper-buttons-row
            styles:
              justify-content: flex-start
              flex-wrap: wrap
              font-size: 0.9em
              line-height: 1.2em
              margin: 6px 0 20px 0
              width: 100%
            buttons:
              - layout: name
                name: Outside is
                styles:
                  button:
                    flex-basis: 1
                    flex-shrink: 0
                  name:
                    color: var(--primary-text-color)
                tap_action:
                  action: none
              - layout: name|icon
                entity: weather.met_service_home_forecast
                name: >-
                  {{ state_attr('weather.forecast_home', 'temperature') }} Â°C,
                  {{ states('weather.met_service_home_forecast') | title }}
                icon: '{{ states(''sensor.weather_condition_icon'') }}'
                tap_action:
                  action: navigate
                  navigation_path: '#weather'
                styles:
                  icon:
                    color: var(--md-sys-color-on-primary)
                  name:
                    color: var(--md-sys-color-on-primary)
                    font-weight: bold
                  button:
                    padding: 2px 8px
                    background-color: var(--md-sys-color-primary)
                    border-radius: 24px
                    flex-basis: 1
                    flex-shrink: 0
                    display: flex
              - layout: name
                name: Â· Wind
                styles:
                  button:
                    flex-basis: 1
                    flex-shrink: 0
                  name:
                    color: var(--primary-text-color)
                tap_action:
                  action: none
              - layout: name
                entity: weather.met_service_home_forecast
                name: >-
                  {% set weather = states.weather.forecast_home.attributes %} {{
                  weather.wind_speed }} {{ weather.wind_speed_unit }}
                tap_action:
                  action: navigate
                  navigation_path: '#weather'
                styles:
                  name:
                    color: var(--md-sys-color-on-primary)
                    font-weight: bold
                  button:
                    padding: 2px 8px
                    background-color: var(--md-sys-color-primary)
                    border-radius: 24px
                    flex-basis: 1
                    flex-shrink: 0
                    display: flex
              - layout: name
                name: Â· High
                styles:
                  button:
                    flex-basis: 1
                    flex-shrink: 0
                  name:
                    color: var(--primary-text-color)
                tap_action:
                  action: none
              - layout: name
                entity: weather.met_service_home_forecast
                name: >-
                  {% set forecast =
                  state_attr('sensor.daily_weather_data_met_service',
                  'forecast_data') %} {% if forecast is defined and
                  forecast.temperature is defined %}
                    {{ forecast.temperature }} Â°Cðº
                  {% else %}
                    N/A Â°Cðº
                  {% endif %}
                tap_action:
                  action: navigate
                  navigation_path: '#weather-forecast'
                styles:
                  name:
                    color: var(--md-sys-color-on-primary)
                    font-weight: bold
                  button:
                    padding: 2px 8px
                    background-color: var(--md-sys-color-primary)
                    border-radius: 24px
                    flex-basis: 1
                    flex-shrink: 0
                    display: flex
              - layout: name
                name: Low
                styles:
                  button:
                    flex-basis: 1
                    flex-shrink: 0
                  name:
                    color: var(--primary-text-color)
                tap_action:
                  action: none
              - layout: name
                entity: weather.met_service_home_forecast
                name: >-
                  {% set forecast =
                  state_attr('sensor.daily_weather_data_met_service',
                  'forecast_data') %} {% if forecast is defined and
                  forecast.temperature is defined %}
                    {{ forecast.templow }} Â°Cð»
                  {% else %}
                    N/A Â°Cð»
                  {% endif %}
                tap_action:
                  action: navigate
                  navigation_path: '#weather-forecast'
                styles:
                  name:
                    color: var(--md-sys-color-on-primary)
                    font-weight: bold
                  button:
                    padding: 2px 8px
                    background-color: var(--md-sys-color-primary)
                    border-radius: 24px
                    flex-basis: 1
                    flex-shrink: 0
                    display: flex
          - type: custom:simple-tabs
            pre-load: true
            active-background: var(--md-sys-color-tertiary)
            active-text-color: var(--md-sys-color-on-tertiary)
            tabs:
              - title: Home
                icon: m3of:home
                card:
                  type: vertical-stack
                  cards:
                    - type: conditional
                      conditions:
                        - condition: state
                          entity: switch.all_water_taps
                          state: 'on'
                      card:
                        type: custom:simple-swipe-card
                        view_mode: carousel
                        card_min_width: 300
                        card_spacing: 0
                        show_pagination: false
                        auto_hide_pagination: 0
                        cards:
                          - type: custom:vertical-stack-in-card
                            cards:
                              - type: grid
                                square: false
                                columns: 2
                                cards:
                                  - type: custom:mushroom-template-card
                                    entity: sensor.house_average_temperature
                                    primary: |
                                      {{ states(entity) | round(1) }}Â°C 
                                    secondary: |
                                      {{ state_attr(entity,'friendly_name') }} 
                                    icon: >
                                      {% set hvac_mode =
                                      states('climate.heat_pump') %}

                                      {% if hvac_mode == 'heat' %} mdi:fire

                                      {% elif hvac_mode == 'cool' %}
                                      mdi:snowflake

                                      {% elif hvac_mode == 'fan_only' %} mdi:fan

                                      {% else %} m3of:thermometer

                                      {% endif %}
                                    tap_action:
                                      action: more-info
                                    color: >
                                      {% set hvac_mode =
                                      states('climate.heat_pump') %}

                                      {% if hvac_mode == 'heat' %} #FF6F22

                                      {% elif hvac_mode == 'cool' %} #2196F3

                                      {% elif hvac_mode == 'fan_only' %} #029688

                                      {% else %}
                                        {% set temp = states('sensor.house_average_temperature') | float %}
                                        {% if temp < 16 %} #CEB2F5
                                        {% elif temp < 18 %} #5EBDEE
                                        {% elif temp < 22 %} #9cc8b8
                                        {% elif temp < 24 %} #e7b562
                                        {% elif temp < 27 %} #FF564B
                                        {% else %} #99332d
                                        {% endif %}
                                      {% endif %}
                                    features_position: bottom
                                  - type: custom:mushroom-template-card
                                    entity: sensor.outdoor_temperature
                                    primary: |
                                      {{ states(entity) | round(1) }}Â°C 
                                    secondary: |
                                      Outdoor Feels Like
                                    icon: >-
                                      {{ states('sensor.weather_condition_icon')
                                      }}
                                    icon_color: >
                                      {% set temp =
                                      state_attr('weather.forecast_home',
                                      'temperature') | float %}

                                      {% if temp < 16 %} #907CAB

                                      {% elif temp < 19 %} #4790b6

                                      {% elif temp < 22 %} #77998c

                                      {% elif temp < 24 %} #b08a4a

                                      {% elif temp < 27 %} #c34139      

                                      {% else %} #752722 {% endif %}
                                    tap_action:
                                      action: navigate
                                      navigation_path: '#weather'
                              - type: custom:config-template-card
                                entities:
                                  - sensor.house_average_temperature
                                  - sensor.outdoor_temperature
                                  - climate.heat_pump
                                variables:
                                  - states['climate.heat_pump'].state
                                  - >-
                                    states['sensor.house_average_temperature'].state
                                  - states['sensor.outdoor_temperature'].state
                                card:
                                  type: custom:mini-graph-card
                                  entities:
                                    - entity: sensor.house_average_temperature
                                      name: House Average Temperature
                                      color: |-
                                        ${vars[0] === 'heat' ? '#FF6F22' : 
                                          (vars[0] === 'cool' ? '#2196F3' : 
                                          (vars[0] === 'fan_only' ? '#029688' : 
                                          (vars[1] < 16 ? '#CEB2F5' :
                                          (vars[1] < 18 ? '#5EBDEE' :
                                          (vars[1] < 22 ? '#9cc8b8' :
                                          (vars[1] < 24 ? '#e7b562' :
                                          (vars[1] < 27 ? '#FF564B' : '#99332d')))))))}
                                    - entity: sensor.outdoor_temperature
                                      name: Outdoor Temperature
                                      color: |-
                                        ${vars[2] < 16 ? '#907CAB' :
                                          (vars[2] < 18 ? '#4790b6' :        
                                          (vars[2] < 22 ? '#77998c' :
                                          (vars[2] < 24 ? '#b08a4a' :
                                          (vars[2] < 27 ? '#c34139' :'#752722'))))}
                                      y_axis: secondary
                                  hours_to_show: 24
                                  line_width: 3
                                  font_size: 50
                                  animate: true
                                  show:
                                    name: false
                                    icon: false
                                    state: false
                                    legend: false
                                    fill: fade
                              - type: horizontal-stack
                                cards:
                                  - type: custom:mushroom-climate-card
                                    entity: climate.heat_pump
                                    primary_info: none
                                    secondary_info: none
                                    icon_type: none
                                    show_temperature_control: true
                                  - type: custom:mushroom-climate-card
                                    entity: climate.heat_pump
                                    primary_info: none
                                    secondary_info: none
                                    icon_type: none
                                    hvac_modes:
                                      - cool
                                      - heat
                                      - fan_only
                                      - 'off'
                          - type: custom:vertical-stack-in-card
                            cards:
                              - type: custom:mushroom-template-card
                                entity: switch.right_walkway_water_tap
                                primary: >
                                  {{
                                  states('sensor.right_walkway_water_tap_flow')
                                  | round(1) }} mÂ³/h
                                secondary: >
                                  {% if
                                  is_state('switch.right_walkway_water_tap',
                                  'on') %}
                                    Running for {{
                                      ((as_timestamp(now()) - as_timestamp(states.switch.right_walkway_water_tap.last_changed)) / 60) | int
                                    }} minutes
                                  {% else %}
                                    Water Flow Rate
                                  {% endif %}
                                icon: m3of:sprinkler
                                tap_action:
                                  action: toggle
                                color: >
                                  {% set flow =
                                  states('sensor.right_walkway_water_tap_flow')
                                  | float %}

                                  {% if flow < 0.1 %} #A9A9A9

                                  {% elif flow < 0.3 %} #ffd34f

                                  {% elif flow < 0.6 %} #9fe7e8

                                  {% else %} #36a9e2

                                  {% endif %}
                                features_position: bottom
                              - type: custom:config-template-card
                                entities: sensor.right_walkway_water_tap_flow
                                variables:
                                  - >-
                                    states['sensor.right_walkway_water_tap_flow'].state
                                card:
                                  type: custom:mini-graph-card
                                  entities:
                                    - entity: sensor.right_walkway_water_tap_flow
                                      name: Water Flow
                                      color: |-
                                        ${vars[0] < 0.1 ? '#a9a9a9' :     
                                          (vars[0] < 0.3 ? '#ffd34f' :
                                          (vars[0] < 0.6 ? '#9fe7e8' : '#36a9e2'))}
                                  hours_to_show: 24
                                  line_width: 3
                                  font_size: 50
                                  animate: true
                                  show:
                                    name: false
                                    icon: false
                                    state: false
                                    legend: false
                                    fill: fade
                              - type: custom:mushroom-template-card
                                entity: sensor.current_water_restriction
                                primary: >
                                  {{ states('sensor.current_water_restriction')
                                  }} 
                                tap_action:
                                  action: more-info
                                icon: >
                                  {% if is_state('input_boolean.water_level_1',
                                  'on') %}
                                    mdi:numeric-1-box-outline
                                  {% elif
                                  is_state('input_boolean.water_level_2', 'on')
                                  %}
                                    mdi:numeric-2-box-outline
                                  {% elif
                                  is_state('input_boolean.water_level_3', 'on')
                                  %}
                                    mdi:numeric-3-box-outline
                                  {% elif
                                  is_state('input_boolean.water_level_4', 'on')
                                  %}
                                    mdi:numeric-4-box-outline
                                  {% else %}
                                    mdi:water
                                  {% endif %}
                                color: >
                                  {% if is_state('input_boolean.water_level_1',
                                  'on') %}
                                    #DFFF00
                                  {% elif
                                  is_state('input_boolean.water_level_2', 'on')
                                  %}
                                    #FFFF00
                                  {% elif
                                  is_state('input_boolean.water_level_3', 'on')
                                  %}
                                    #FFA500
                                  {% elif
                                  is_state('input_boolean.water_level_4', 'on')
                                  %}
                                    #FF0000
                                  {% else %}
                                    #89CFF0
                                  {% endif %}
                                features_position: bottom
                    - type: conditional
                      conditions:
                        - condition: state
                          entity: switch.all_water_taps
                          state: 'off'
                      card:
                        type: custom:vertical-stack-in-card
                        cards:
                          - type: grid
                            square: false
                            columns: 2
                            cards:
                              - type: custom:mushroom-template-card
                                entity: sensor.house_average_temperature
                                primary: |
                                  {{ states(entity) | round(1) }} Â°C
                                secondary: |
                                  {{ state_attr(entity,'friendly_name') }} 
                                icon: >
                                  {% set hvac_mode = states('climate.heat_pump')
                                  %}

                                  {% if hvac_mode == 'heat' %} mdi:fire

                                  {% elif hvac_mode == 'cool' %} mdi:snowflake

                                  {% elif hvac_mode == 'fan_only' %} mdi:fan

                                  {% else %} m3of:thermometer

                                  {% endif %}
                                icon_color: >
                                  {% set hvac_mode = states('climate.heat_pump')
                                  %}

                                  {% if hvac_mode == 'heat' %} #FF6F22

                                  {% elif hvac_mode == 'cool' %} #2196F3

                                  {% elif hvac_mode == 'fan_only' %} #029688

                                  {% else %}
                                    {% set temp = states('sensor.house_average_temperature') | float %}
                                    {% if temp < 16 %} #CEB2F5
                                    {% elif temp < 18 %} #5EBDEE
                                    {% elif temp < 22 %} #9cc8b8
                                    {% elif temp < 24 %} #e7b562
                                    {% elif temp < 27 %} #FF564B
                                    {% else %} #99332d
                                    {% endif %}
                                  {% endif %}
                                tap_action:
                                  action: more-info
                              - type: custom:mushroom-template-card
                                entity: sensor.outdoor_temperature
                                primary: |
                                  {{ states(entity) | round(1) }} Â°C
                                secondary: |
                                  Outdoor Feels Like
                                icon: '{{ states(''sensor.weather_condition_icon'') }}'
                                icon_color: >
                                  {% set temp =
                                  state_attr('weather.forecast_home',
                                  'temperature') | float %}

                                  {% if temp < 16 %} #907CAB

                                  {% elif temp < 19 %} #4790b6

                                  {% elif temp < 22 %} #77998c

                                  {% elif temp < 24 %} #b08a4a

                                  {% elif temp < 27 %} #c34139      

                                  {% else %} #752722 {% endif %}
                                tap_action:
                                  action: navigate
                                  navigation_path: '#weather'
                          - type: custom:config-template-card
                            entities:
                              - sensor.house_average_temperature
                              - sensor.outdoor_temperature
                              - climate.heat_pump
                            variables:
                              - states['climate.heat_pump'].state
                              - states['sensor.house_average_temperature'].state
                              - states['sensor.outdoor_temperature'].state
                            card:
                              type: custom:mini-graph-card
                              entities:
                                - entity: sensor.house_average_temperature
                                  name: House Average Temperature
                                  color: |-
                                    ${vars[0] === 'heat' ? '#FF6F22' : 
                                      (vars[0] === 'cool' ? '#2196F3' : 
                                      (vars[0] === 'fan_only' ? '#029688' : 
                                      (vars[1] < 16 ? '#CEB2F5' :
                                      (vars[1] < 18 ? '#5EBDEE' :
                                      (vars[1] < 22 ? '#9cc8b8' :
                                      (vars[1] < 24 ? '#e7b562' :
                                      (vars[1] < 27 ? '#FF564B' : '#99332d')))))))}
                                - entity: sensor.outdoor_temperature
                                  name: Outdoor Temperature
                                  color: |-
                                    ${vars[2] < 16 ? '#907CAB' :
                                      (vars[2] < 18 ? '#4790b6' :        
                                      (vars[2] < 22 ? '#77998c' :
                                      (vars[2] < 24 ? '#b08a4a' :
                                      (vars[2] < 27 ? '#c34139' :'#752722'))))}
                                  y_axis: secondary
                              hours_to_show: 24
                              line_width: 3
                              font_size: 50
                              animate: true
                              show:
                                name: false
                                icon: false
                                state: false
                                legend: false
                                fill: fade
                          - type: horizontal-stack
                            cards:
                              - type: custom:mushroom-climate-card
                                entity: climate.heat_pump
                                primary_info: none
                                secondary_info: none
                                icon_type: none
                                show_temperature_control: true
                              - type: custom:mushroom-climate-card
                                entity: climate.heat_pump
                                primary_info: none
                                secondary_info: none
                                icon_type: none
                                hvac_modes:
                                  - cool
                                  - heat
                                  - fan_only
                                  - 'off'
                    - type: custom:simple-swipe-card
                      auto_hide_pagination: 0
                      cards:
                        - type: custom:vertical-stack-in-card
                          cards:
                            - type: custom:mushroom-template-card
                              tap_action:
                                action: none
                              hold_action:
                                action: none
                              double_tap_action:
                                action: none
                              features_position: bottom
                            - type: custom:button-card
                              show_name: false
                              show_icon: false
                              tap_action:
                                action: none
                              styles:
                                card:
                                  - background: none
                                  - box-shadow: none
                      card_mod:
                        style: |
                          :host {
                            --simple-swipe-card-pagination-dot-active-color: var(--md-sys-color-tertiary);
                            --simple-swipe-card-pagination-dot-inactive-color: var(--md-sys-color-on-tertiary);
                            --simple-swipe-card-pagination-dot-size: 7px;
                          }
                    - entities:
                        - entity: calendar.1
                          accent_color: '#ff6a6a'
                        - entity: calendar.2
                          accent_color: '#71c8fe'
                      days_to_show: 10
                      compact_events_to_show: 10
                      background_color: transparent
                      vertical_line_width: 5px
                      event_spacing: 6px
                      first_day_of_week: monday
                      show_week_numbers: iso
                      week_number_color: var(--md-sys-color-on-primary)
                      week_number_background_color: var(--md-sys-color-primary)
                      month_separator_width: 1px
                      month_separator_color: var(--md-sys-color-tertiary)
                      today_indicator: pulse
                      today_indicator_position: 10% 50%
                      today_indicator_color: var(--md-sys-color-primary)
                      weekday_font_size: 12px
                      month_font_size: 10px
                      show_countdown: true
                      show_progress_bar: true
                      progress_bar_color: var(--md-sys-color-primary)
                      weather:
                        position: event
                        date:
                          show_conditions: true
                          show_high_temp: true
                          show_low_temp: false
                          icon_size: 14px
                          font_size: 12px
                          color: var(--primary-text-color)
                        event:
                          show_conditions: true
                          show_temp: true
                          icon_size: 14px
                          font_size: 12px
                          color: var(--primary-text-color)
                        entity: weather.met_service_home_forecast
                      tap_action:
                        action: expand
                      type: custom:calendar-card-pro
              - title: Environment
                icon: mdi:weather-partly-cloudy
                card:
                  type: horizontal-stack
                  cards:
                    - type: vertical-stack
                      cards:
                        - type: custom:decluttering-card
                          template: mushroom_title_card
                          variables:
                            - title: Humidity
                        - type: custom:vertical-stack-in-card
                          cards:
                            - type: custom:decluttering-card
                              template: humidity_entity
                              variables:
                                - entity: sensor.living_area_humidity
                                - name: Living
                                - icon: m3of:chair
              - title: Active
                icon: m3of:play-circle
                card:
                  type: vertical-stack
                  cards:
                    - type: conditional
                      conditions:
                        - condition: state
                          entity: light.all_lights
                          state: 'on'
                      card:
                        type: custom:decluttering-card
                        template: mushroom_title_card
                        variables:
                          - title: Lights
                    - type: custom:auto-entities
                      card:
                        square: false
                        type: grid
                        columns: 2
                      card_param: cards
                      filter:
                        include:
                          - group: light.all_lights
                            entity_id: light.lights_*
                            state: 'on'
                            options:
                              type: custom:google-slider-card
                              entity: this.entity_id
                              show_percentage: true
                              bold_text: false
                              control_type: light
                          - group: light.all_lights
                            entity_id: '*led*'
                            state: 'on'
                            options:
                              type: custom:google-slider-card
                              entity: this.entity_id
                              icon: mdi:led-strip-variant
                              show_percentage: true
                              bold_text: false
                              control_type: light
                        exclude: []
                      show_empty: false
                      sort:
                        method: entity_id
                    - type: vertical-stack
                      cards:
                        - type: conditional
                          conditions:
                            - condition: state
                              entity: switch.all_light_switches
                              state: 'on'
                          card:
                            type: custom:decluttering-card
                            template: mushroom_title_card
                            variables:
                              - title: Light Switches
                        - type: custom:auto-entities
                          card:
                            square: false
                            type: grid
                            columns: 2
                          card_param: cards
                          filter:
                            include:
                              - group: switch.all_light_switches
                                entity_id: '*switch*'
                                state: 'on'
                                options:
                                  type: custom:material-button-card
                                  use_default_icon: false
                                  use_default_toggle: true
                                  use_default_text: true
                                  entity: this.entity_id
                                  icon: m3of:lightbulb
                                  height: 97
                                  control_type: generic
                                  dual_icon: true
                                  icon_on: m3of:lightbulb
                                  icon_off: m3of:light-off
                            exclude: []
                          show_empty: false
                          sort:
                            method: entity_id
                    - type: vertical-stack
                      cards:
                        - type: conditional
                          conditions:
                            - condition: state
                              entity: fan.all_fans
                              state: 'on'
                          card:
                            type: custom:decluttering-card
                            template: mushroom_title_card
                            variables:
                              - title: Fans
                        - type: custom:auto-entities
                          card:
                            square: false
                            type: grid
                            columns: 2
                          card_param: cards
                          filter:
                            include:
                              - group: fan.all_fans
                                state: 'on'
                                options:
                                  type: custom:material-button-card
                                  use_default_icon: false
                                  use_default_toggle: true
                                  use_default_text: true
                                  entity: this.entity_id
                                  height: 97
                                  control_type: generic
                                  dual_icon: true
                            exclude: []
                          show_empty: false
                          sort:
                            method: friendly_name
      - type: grid
        cards:
          - type: vertical-stack
            cards:
              - type: custom:bubble-card
                card_type: pop-up
                hash: '#notifications'
                margin_top_mobile: calc(96vh - 800px)
                name: Notifications
                icon: m3of:notifications
                styles: |-
                  #root {
                          height: unset !important;
                          max-height: 100% !important;
                          transition: transform var(--md-sys-motion-expressive-spatial-default) !important;
                        }
                        .bubble-pop-up-container {
                          padding-bottom: 64px !important;

                        }
                bg_color: var(--card-background-color)
                button_type: name
              - type: custom:mushroom-chips-card
                chips:
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        entity: sensor.soil_sensor_corner_moisture
                        below: 40
                    chip:
                      type: template
                      entity: sensor.soil_sensor_corner_moisture
                      icon: mdi:water-percent
                      content: '{{ states(''sensor.soil_sensor_corner_moisture'') }}%'
                      icon_color: >
                        {% set moisture =
                        states('sensor.soil_sensor_corner_moisture') | int(0) %}
                        {% if moisture >= 40 %}
                          green
                        {% elif moisture >= 25 %}
                          yellow
                        {% else %}
                          red
                        {% endif %}
                      tap_action:
                        action: more-info
                  - type: conditional
                    conditions:
                      - condition: state
                        entity: sensor.house_maintenance_chip_card
                        state: 'true'
                    chip:
                      type: template
                      entity: sensor.house_maintenance_chip_card
                      icon: |
                        {% if is_state('input_boolean.rubbish', 'on') %}
                          mdi:trash-can
                        {% elif is_state('input_boolean.recycle', 'on') %}
                          mdi:recycle
                        {% else %} {% endif %}
                      icon_color: |
                        {% if is_state('input_boolean.rubbish', 'on') %}
                          #C41E3A
                        {% elif is_state('input_boolean.recycle', 'on') %}
                          #50C878
                        {% else %} {% endif %}
                      content: |
                        {% if is_state('input_boolean.rubbish', 'on') %}
                          Rubbish Day
                        {% elif is_state('input_boolean.recycle', 'on') %}
                          Recycle Day
                        {% else %} {% endif %}      
                      tap_action:
                        action: more-info
                  - type: conditional
                    conditions:
                      - condition: state
                        entity: binary_sensor.all_doors
                        state: 'on'
                    chip:
                      type: template
                      entity: binary_sensor.all_doors
                      content: |
                        {{ expand('binary_sensor.all_doors')
                            | selectattr('state', 'eq', 'on') 
                            | map(attribute='name') 
                            | join(', ') }}
                      icon: |
                        {% set open_doors = expand('binary_sensor.all_doors')
                            | selectattr('state', 'eq', 'on')
                            | list | count %}
                        {{ 'm3o:door-open' if open_doors > 0 else '' }}
                      icon_color: red
                      tap_action:
                        action: more-info
                  - type: conditional
                    conditions:
                      - condition: state
                        entity: sensor.laundry_machine_state
                        state: Delay Run
                    chip:
                      type: entity
                      entity: sensor.laundry_delay_time_remaining
                      icon_color: blue
                      icon: m3of:timer-arrow-down
                      tap_action:
                        action: more-info
                  - type: conditional
                    conditions:
                      - condition: state
                        entity: sensor.laundry_machine_state
                        state: Run
                    chip:
                      type: entity
                      entity: sensor.laundry_time_remaining
                      icon: m3of:laundry
                      icon_color: blue
                      tap_action:
                        action: more-info
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        entity: sensor.dryer_switch_lr_power
                        above: 10
                    chip:
                      type: template
                      entity: sensor.dryer_switch_lr_power
                      tap_action:
                        action: more-info
                      icon: mdi:tumble-dryer
                      icon_color: '#880808'
                      content: Dryer Running
                  - type: conditional
                    conditions:
                      - condition: or
                        conditions:
                          - condition: state
                            entity: media_player.all_speakers
                            state: playing
                          - condition: state
                            entity: media_player.all_speakers
                            state: 'on'
                    chip:
                      type: template
                      entity: media_player.all_speakers
                      content: |
                        {{ expand(states.media_player.all_speakers)
                            | selectattr('state', 'eq', 'playing')
                            | list | count }}
                      icon: m3of:music-note
                      icon_color: var(--primary-text-color)
                      tap_action:
                        action: more-info
                alignment: start
              - type: conditional
                conditions:
                  - condition: state
                    entity: binary_sensor.doors_grg
                    state: 'on'
                card:
                  type: vertical-stack
                  cards:
                    - type: custom:mushroom-chips-card
                      alignment: start
                      chips:
                        - type: template
                          entity: switch.light_switch_drw
                          icon: m3of:lightbulb
                          tap_action:
                            action: toggle
                          content: Driveway Light
                          card_mod:
                            style:
                              .: |
                                ha-card {
                                  --text-color: {{ 'var(--primary-background-color)' if is_state('switch.light_switch_drw', 'on') else 'none' }};
                                  --color: {{ 'var(--md-sys-color-on-primary)'  if is_state('switch.light_switch_drw', 'on') else 'none' }};
                                  --chip-background: {{ 'var(--md-sys-color-primary)' if is_state('switch.light_switch_drw', 'on') else 'color-mix(in srgb, var(--md-sys-color-surface-variant) 40%, transparent)' }};
                                }
                        - type: template
                          entity: switch.porch_light_drw
                          icon: m3of:lightbulb
                          tap_action:
                            action: toggle
                          content: Porch Light
                          card_mod:
                            style:
                              .: |
                                ha-card {
                                  --text-color: {{ 'var(--primary-background-color)' if is_state('switch.porch_light_drw', 'on') else 'none' }};
                                  --color: {{ 'var(--md-sys-color-on-primary)'  if is_state('switch.porch_light_drw', 'on') else 'none' }};
                                  --chip-background: {{ 'var(--md-sys-color-primary)' if is_state('switch.porch_light_drw', 'on') else 'color-mix(in srgb, var(--md-sys-color-surface-variant) 40%, transparent)' }};
                                }
              - type: conditional
                conditions:
                  - condition: or
                    conditions:
                      - condition: state
                        entity: input_boolean.rubbish
                        state: 'on'
                      - condition: state
                        entity: input_boolean.recycle
                        state: 'on'
                card:
                  type: vertical-stack
                  cards:
                    - type: custom:mushroom-chips-card
                      alignment: start
                      chips:
                        - type: template
                          entity: switch.light_switch_drw
                          icon: m3of:lightbulb
                          tap_action:
                            action: toggle
                          content: Driveway Light
                          card_mod:
                            style:
                              .: |
                                ha-card {
                                  --text-color: {{ 'var(--primary-background-color)' if is_state('switch.light_switch_drw', 'on') else 'none' }};
                                  --color: {{ 'var(--md-sys-color-on-primary)'  if is_state('switch.light_switch_drw', 'on') else 'none' }};
                                  --chip-background: {{ 'var(--md-sys-color-primary)' if is_state('switch.light_switch_drw', 'on') else 'color-mix(in srgb, var(--md-sys-color-surface-variant) 40%, transparent)' }};
                                }
                        - type: template
                          entity: switch.porch_light_drw
                          icon: m3of:lightbulb
                          tap_action:
                            action: toggle
                          content: Porch Light
                          card_mod:
                            style:
                              .: |
                                ha-card {
                                  --text-color: {{ 'var(--primary-background-color)' if is_state('switch.porch_light_drw', 'on') else 'none' }};
                                  --color: {{ 'var(--md-sys-color-on-primary)'  if is_state('switch.porch_light_drw', 'on') else 'none' }};
                                  --chip-background: {{ 'var(--md-sys-color-primary)' if is_state('switch.porch_light_drw', 'on') else 'color-mix(in srgb, var(--md-sys-color-surface-variant) 40%, transparent)' }};
                                }
              - type: grid
                columns: 2
                square: false
                cards:
                  - type: conditional
                    conditions:
                      - condition: or
                        conditions:
                          - condition: state
                            entity: binary_sensor.show_wash_cuddly_timer
                            state: 'on'
                          - condition: state
                            entity: timer.wash_cuddly
                            state: idle
                    card:
                      type: custom:timer-bar-card
                      entity: timer.wash_cuddly
                      invert: true
                      bar_direction: rtl
                      bar_width: 60%
                      mushroom:
                        layout: vertical
                        color: '#f385bc'
                  - type: conditional
                    conditions:
                      - condition: state
                        entity: timer.heated_towel_rails
                        state: active
                    card:
                      type: custom:timer-bar-card
                      entity: timer.heated_towel_rails
                      invert: true
                      bar_direction: rtl
                      bar_width: 60%
                      mushroom:
                        layout: vertical
                        color: orange
                  - type: conditional
                    conditions:
                      - condition: state
                        entity: timer.exhaust_fans
                        state: active
                    card:
                      type: custom:timer-bar-card
                      entity: timer.exhaust_fans
                      invert: true
                      bar_direction: rtl
                      bar_width: 60%
                      mushroom:
                        layout: vertical
                        color: '#b5e0f7'
                  - type: conditional
                    conditions:
                      - condition: state
                        entity: timer.rice_cooker
                        state: active
                    card:
                      type: custom:timer-bar-card
                      entity: timer.rice_cooker
                      invert: true
                      bar_direction: rtl
                      bar_width: 60%
                      mushroom:
                        layout: vertical
                        color: '#D70040'
                  - type: conditional
                    conditions:
                      - condition: state
                        entity: timer.blender
                        state: active
                    card:
                      type: custom:timer-bar-card
                      entity: timer.blender
                      invert: true
                      bar_direction: rtl
                      bar_width: 60%
                      mushroom:
                        layout: vertical
                        color: '#A020F0'
                  - type: conditional
                    conditions:
                      - condition: state
                        entity: timer.sprinkler
                        state: active
                    card:
                      type: custom:timer-bar-card
                      entity: timer.sprinkler
                      invert: true
                      bar_direction: rtl
                      bar_width: 60%
                      mushroom:
                        layout: vertical
                        color: '#4CBB17'
                  - type: conditional
                    conditions:
                      - condition: state
                        entity: timer.wash_duvet
                        state: idle
                    card:
                      type: custom:timer-bar-card
                      entity: timer.wash_duvet
                      invert: true
                      bar_direction: rtl
                      bar_width: 60%
                      mushroom:
                        layout: vertical
                        color: '#f3c843'
              - type: custom:bubble-card
                card_type: separator
                styles: |-
                  .bubble-icon,
                  .bubble-name {
                    display: none;
                  }
                  .bubble-line {
                    margin-right: 0;
                    height: 4px;
                    max-width: 32px;
                    opacity: 1;
                    background: var(--md-sys-color-on-surface-variant);
                  }
                  .bubble-separator {
                    height: min-content !important;
                    justify-content: center;
                  }
          - type: vertical-stack
            cards:
              - type: custom:bubble-card
                card_type: pop-up
                hash: '#volcano-warning'
                margin_top_mobile: calc(96vh - 800px)
                name: Taupo Volcano Warning
                icon: m3of:mountain-steam
                styles: |-
                  #root {
                          height: unset !important;
                          max-height: 100% !important;
                          transition: transform var(--md-sys-motion-expressive-spatial-default) !important;
                        }
                        .bubble-pop-up-container {
                          padding-bottom: 64px !important;

                        }
                bg_color: var(--card-background-color)
                button_type: name
              - type: markdown
                content: >
                  {{ state_attr('sensor.volcano_taupo', 'activity') |
                  default('No warnings') }}


                  _Issued: {{
                    as_datetime(state_attr('sensor.volcano_taupo', 'feed_last_update_successful')).astimezone().strftime('%I:%M%p %A, %d %b')
                  }}_
                text_only: true
              - type: custom:bubble-card
                card_type: separator
                styles: |-
                  .bubble-icon,
                  .bubble-name {
                    display: none;
                  }
                  .bubble-line {
                    margin-right: 0;
                    height: 4px;
                    max-width: 32px;
                    opacity: 1;
                    background: var(--md-sys-color-on-surface-variant);
                  }
                  .bubble-separator {
                    height: min-content !important;
                    justify-content: center;
                  }
          - type: vertical-stack
            cards:
              - type: custom:bubble-card
                card_type: pop-up
                hash: '#earthquake-warning'
                margin_top_mobile: calc(96vh - 800px)
                name: Earthquake Warning
                icon: m3of:globe-location-pin
                styles: |-
                  #root {
                          height: unset !important;
                          max-height: 100% !important;
                          transition: transform var(--md-sys-motion-expressive-spatial-default) !important;
                        }
                        .bubble-pop-up-container {
                          padding-bottom: 64px !important;


                        }
                bg_color: var(--card-background-color)
                button_type: name
              - type: vertical-stack
                cards:
                  - type: custom:decluttering-card
                    template: mushroom_title_card
                    variables:
                      - title: Latest Earthquake
                  - type: markdown
                    content: >

                      {% set sensor = states.geo_location |
                      selectattr('attributes.source', 'defined') |
                      selectattr('attributes.source', 'eq', 'geonetnz_quakes') |
                      sort(attribute='last_updated', reverse=true) | list |
                      first %}

                      {% if sensor %}

                      **Locality:** {{ sensor.attributes.locality }}  

                      **Magnitude:** {{ sensor.attributes.magnitude | round(2)
                      }}

                      **Depth:** {{ sensor.attributes.depth }} km  

                      **Time:** {{ as_timestamp(sensor.attributes.time) |
                      timestamp_custom('%a, %b %-d at %I:%M %p') }}  

                      {% else %}

                      No recent earthquakes detected

                      {% endif %}
              - type: custom:auto-entities
                card:
                  type: map
                  default_zoom: 8
                filter:
                  include:
                    - options: {}
                      domain: geo_location
                      attributes:
                        source: geonetnz_quakes
                sort:
                  method: last_updated
                  reverse: true
                  count: 1
              - type: custom:bubble-card
                card_type: separator
                styles: |-
                  .bubble-icon,
                  .bubble-name {
                    display: none;
                  }
                  .bubble-line {
                    margin-right: 0;
                    height: 4px;
                    max-width: 32px;
                    opacity: 1;
                    background: var(--md-sys-color-on-surface-variant);
                  }
                  .bubble-separator {
                    height: min-content !important;
                    justify-content: center;
                  }
          - type: vertical-stack
            cards:
              - type: custom:bubble-card
                card_type: pop-up
                hash: '#alarmo'
                margin_top_mobile: calc(96vh - 800px)
                name: Alarm
                icon: m3of:pin
                styles: |-
                  #root {
                          height: unset !important;
                          max-height: 100% !important;
                          transition: transform var(--md-sys-motion-expressive-spatial-default) !important;
                        }
                        .bubble-pop-up-container {
                          padding-bottom: 64px !important;


                        }
                bg_color: var(--card-background-color)
                button_type: name
              - states:
                  - arm_away
                  - arm_night
                type: alarm-panel
                entity: alarm_control_panel.alarmo
                name: Alarmo
                theme: Material You
              - type: custom:bubble-card
                card_type: separator
                styles: |-
                  .bubble-icon,
                  .bubble-name {
                    display: none;
                  }
                  .bubble-line {
                    margin-right: 0;
                    height: 4px;
                    max-width: 32px;
                    opacity: 1;
                    background: var(--md-sys-color-on-surface-variant);
                  }
                  .bubble-separator {
                    height: min-content !important;
                    justify-content: center;
                  }
          - type: vertical-stack
            cards:
              - type: custom:bubble-card
                card_type: pop-up
                hash: '#weather'
                margin_top_mobile: calc(96vh - 800px)
                name: Weather
                icon: mdi:weather-partly-cloudy
                styles: |-
                  #root {
                          height: unset !important;
                          max-height: 100% !important;
                          transition: transform var(--md-sys-motion-expressive-spatial-default) !important;
                        }
                        .bubble-pop-up-container {
                          padding-bottom: 64px !important;

                        }
                bg_color: var(--card-background-color)
                button_type: name
              - type: conditional
                conditions:
                  - condition: or
                    conditions:
                      - condition: state
                        entity: sensor.home_metservice_weather_warnings
                        state: unavailable
                      - condition: state
                        entity: sensor.home_metservice_weather_warnings
                        state: unknown
                card:
                  type: vertical-stack
                  cards:
                    - type: custom:decluttering-card
                      template: mushroom_title_subtitle_card
                      variables:
                        - title: Description
                        - subtitle: >-
                            {% set aqi =
                            states('sensor.morrinsville_college_new_zealand_air_quality_index')
                            %}{% set dominant_pollutant =
                            states('sensor.morrinsville_college_new_zealand_dominant_pollutant')
                            %}{% if aqi not in
                            ['unknown','unavailable','none',''] %}{% set aqi =
                            aqi | int %}{% set aqi_level = ('Good' if aqi <= 50
                            else 'Moderate' if aqi <= 100 else 'Unhealthy for
                            sensitive groups' if aqi <= 150 else 'Unhealthy' if
                            aqi <= 200 else 'Very Unhealthy' if aqi <= 300 else
                            'Hazardous') %}ð¿ Air quality: {{ aqi_level }} (AQI:
                            {{ aqi }}) ð¶âð«ï¸ Pollutant: {{ dominant_pollutant
                            }}{% else %}ð¿ Air quality data is currently
                            unavailable.{% endif %}
                    - type: markdown
                      content: >
                        {{ states('sensor.home_weather_description') }} {{
                        states('sensor.home_pollen_type') }}
              - type: conditional
                conditions:
                  - condition: and
                    conditions:
                      - condition: state
                        entity: sensor.home_metservice_weather_warnings
                        state_not: unavailable
                      - condition: state
                        entity: sensor.home_metservice_weather_warnings
                        state_not: unknown
                card:
                  type: vertical-stack
                  cards:
                    - type: custom:decluttering-card
                      template: mushroom_title_card
                      variables:
                        - title: Weather Warning
                    - type: markdown
                      content: >2-

                          {{ state_attr('sensor.home_metservice_weather_warnings', 'warnings') | default('No warnings') }}

                        _Issued: {{
                        states.sensor.home_metservice_weather_warnings.last_changed.strftime('%I:%M%p
                        %A, %d %b') }}_
              - type: vertical-stack
                cards:
                  - type: custom:decluttering-card
                    template: mushroom_title_card
                    variables:
                      - title: Lunar Phase
                  - type: custom:lunar-phase-card
                    entity: ''
                    12hr_format: true
                    calendar_modal: false
                    compact_view: true
                    default_card: base
                    hide_buttons: false
                    mile_unit: false
                    moon_position: left
                    number_decimals: 2
                    selected_language: en
                    show_background: false
                    southern_hemisphere: false
                    use_custom: false
                    use_default: true
                    use_entity: false
                    graph_config:
                      graph_type: default
                      y_ticks: false
                      x_ticks: false
                      show_time: true
                      show_current: true
                      show_highest: true
                      y_ticks_position: left
                      y_ticks_step_size: 30
                      time_step_size: 30
                    font_customize:
                      header_font_size: medium
                      header_font_style: capitalize
                      label_font_size: small
                      label_font_style: none
                      label_font_color: ''
                      hide_label: false
                    latitude: your_lattitude
                    longitude: your_longitude
                    location:
                      city: ''
                      country: New Zealand
                    theme:
                      selected_theme: Material You
                    custom_background: >-
                      https://cdn.jsdelivr.net/gh/ngocjohn/lunar-phase-card@1.7.3/background/moon_bg_2.png
              - type: vertical-stack
                cards:
                  - type: custom:decluttering-card
                    template: mushroom_title_subtitle_card
                    variables:
                      - title: Radar
                      - subtitle: >-
                          {% set weather =
                          states.weather.forecast_home.attributes %}{% set temp
                          = weather.temperature %}{% set temp_unit =
                          weather.temperature_unit %}{% set humidity =
                          weather.humidity %}{% set cloud =
                          weather.cloud_coverage %}{% set uv = weather.uv_index
                          %}{% set pressure = weather.pressure %}{% set
                          wind_speed = weather.wind_speed %}{% set wind_unit =
                          weather.wind_speed_unit %}ð¡ï¸ {{ temp }}{{ temp_unit
                          }} ð§ Humidity: {{ humidity }}% âï¸ Clouds: {{ cloud |
                          round }}% ð¨ Wind: {{ wind_speed }} {{ wind_unit }}
                          ð¤ï¸ UV index: {{ uv }}
                  - type: custom:mod-card
                    card:
                      type: iframe
                      url: >-
                        https://embed.windy.com/embed2.html?your_lattitude&your_longitude&width=800&height=600
                    style: |
                      ha-card {
                        padding: 0;
                        height: 400px !important;   /* fix height */
                        width: 100% !important;
                        overflow: hidden;
                      }
                      iframe {
                        width: 100% !important;
                        height: 100% !important;
                      }
              - type: custom:bubble-card
                card_type: separator
                styles: |-
                  .bubble-icon,
                  .bubble-name {
                    display: none;
                  }
                  .bubble-line {
                    margin-right: 0;
                    height: 4px;
                    max-width: 32px;
                    opacity: 1;
                    background: var(--md-sys-color-on-surface-variant);
                  }
                  .bubble-separator {
                    height: min-content !important;
                    justify-content: center;
                  }
          - type: vertical-stack
            cards:
              - type: custom:bubble-card
                card_type: pop-up
                hash: '#weather-warning'
                margin_top_mobile: calc(96vh - 800px)
                name: Weather Warning
                icon: m3of:warning
                styles: |-
                  #root {
                          height: unset !important;
                          max-height: 100% !important;
                          transition: transform var(--md-sys-motion-expressive-spatial-default) !important;
                        }
                        .bubble-pop-up-container {
                          padding-bottom: 64px !important;

                        }
                bg_color: var(--card-background-color)
                button_type: name
              - type: markdown
                content: >2-

                    {{ state_attr('sensor.home_metservice_weather_warnings', 'warnings') | default('No warnings') }}

                  _Issued: {{
                  states.sensor.home_metservice_weather_warnings.last_changed.strftime('%I:%M%p
                  %A, %d %b') }}_
                text_only: true
              - type: custom:mushroom-chips-card
                chips:
                  - type: template
                    icon: mdi:weather-cloudy-arrow-right
                    tap_action:
                      action: navigate
                      navigation_path: '#weather-forecast'
                    content: Open Weather Forecast Panel
                    card_mod:
                      style:
                        .: |
                          ha-card {
                            --text-color: {{ 'var(--primary-background-color)' }};
                            --color: {{ 'var(--md-sys-color-on-primary)'  }};
                            --chip-background: {{ 'var(--md-sys-color-primary)' }};
                          }
                alignment: center
              - type: custom:bubble-card
                card_type: separator
                styles: |-
                  .bubble-icon,
                  .bubble-name {
                    display: none;
                  }
                  .bubble-line {
                    margin-right: 0;
                    height: 4px;
                    max-width: 32px;
                    opacity: 1;
                    background: var(--md-sys-color-on-surface-variant);
                  }
                  .bubble-separator {
                    height: min-content !important;
                    justify-content: center;
                  }
          - type: vertical-stack
            cards:
              - type: custom:bubble-card
                card_type: pop-up
                hash: '#weather-forecast'
                margin_top_mobile: calc(96vh - 800px)
                name: Forecast
                icon: mdi:weather-cloudy-arrow-right
                styles: |-
                  #root {
                          height: unset !important;
                          max-height: 100% !important;
                          transition: transform var(--md-sys-motion-expressive-spatial-default) !important;
                        }
                        .bubble-pop-up-container {
                          padding-bottom: 64px !important;
                          
                        }
                button_type: name
              - type: vertical-stack
                cards:
                  - type: custom:decluttering-card
                    template: mushroom_title_subtitle_card
                    variables:
                      - title: Weather Forecast
                      - subtitle: >-
                          {% set forecasts =
                          state_attr('sensor.met_no_hourly_forecasts_full_hourly_forecast','forecasts')
                          %}{% if forecasts %}{% set rain_forecasts = forecasts
                          | selectattr('precipitation','defined') |
                          selectattr('precipitation','gt',0) | list %}{% if
                          rain_forecasts | count > 0 %}{% set next_rain =
                          rain_forecasts | first %}{% set val =
                          next_rain.precipitation | float %}{% if val < 2.5
                          %}ð¦ï¸ Light Â· {{ val | round(1) }} mm Â· {{
                          as_datetime(next_rain.datetime).strftime('%a, %b %d at
                          %I:%M %p') }}{% elif val < 7.6 %}ð§ï¸ Moderate Â· {{ val
                          | round(1) }} mm Â· {{
                          as_datetime(next_rain.datetime).strftime('%a, %b %d at
                          %I:%M %p') }}{% elif val < 35 %}âï¸ Heavy Â· {{ val |
                          round(1) }} mm Â· {{
                          as_datetime(next_rain.datetime).strftime('%a, %b %d at
                          %I:%M %p') }}{% else %}âï¸ Very heavy Â· {{ val |
                          round(1) }} mm Â· {{
                          as_datetime(next_rain.datetime).strftime('%a, %b %d at
                          %I:%M %p') }}{% endif %}{% else %}ð¤ï¸ No rain today{%
                          endif %}{% else %}ð¤ï¸ N/A{% endif %}
                  - type: custom:clock-weather-card-hui-icons
                    entity: weather.met_service_home_forecast
                    sun_entity: sun.sun
                    temperature_sensor: sensor.outdoor_temperature
                    humidity_sensor: sensor.outdoor_humidity
                    forecast_rows: 5
                    locale: en-NZ
                    time_pattern: HH:mm
                    time_format: 12
                    date_pattern: ccc, d.MM.yy
                    hide_today_section: false
                    hide_forecast_section: false
                    show_humidity: false
                    hide_clock: false
                    hide_date: false
                    hourly_forecast: false
                    use_browser_time: false
                    time_zone: null
                    show_decimal: false
              - type: vertical-stack
                cards:
                  - type: custom:decluttering-card
                    template: mushroom_title_subtitle_card
                    variables:
                      - title: Rainfall & Temperature Forecast
                      - subtitle: >-
                          {% set forecasts =
                          state_attr('sensor.met_no_hourly_forecasts_full_hourly_forecast','forecasts')
                          %}{% if forecasts %}{% set values = forecasts |
                          map(attribute='precipitation') | map('float') | list
                          %}{% set total = values | sum %}{% set peak = values |
                          max %}{% set peak_entry = forecasts |
                          selectattr('precipitation','eq', peak) | list | first
                          %}{% if total == 0 %}ð¤ï¸ Rainfall: None expected in
                          the next 24 hours{% else %}{% if total < 2.5 %}{% set
                          category = 'Light' %}{% set emoji = 'ð¦ï¸' %}{% elif
                          total < 7.6 %}{% set category = 'Moderate' %}{% set
                          emoji = 'ð§ï¸' %}{% elif total < 35 %}{% set category =
                          'Heavy' %}{% set emoji = 'âï¸' %}{% else %}{% set
                          category = 'Very heavy' %}{% set emoji = 'ð' %}{%
                          endif %}{{ emoji }} Rainfall: {{ total | round(1) }}
                          mm ({{ category }}), peaking {{ peak | round(1) }}
                          mm/hr on {{
                          as_datetime(peak_entry.datetime).strftime('%a %I:%M
                          %p') }}.{% endif %}{% else %}ð¤ï¸ Rainfall: N/A{% endif
                          %}
                  - type: custom:apexcharts-card
                    header:
                      show: true
                    graph_span: 24h
                    span:
                      start: hour
                    now:
                      show: true
                    apex_config:
                      chart:
                        height: 235
                      legend:
                        show: false
                      grid:
                        yaxis:
                          lines:
                            show: false
                      xaxis:
                        crosshairs:
                          show: false
                        tooltip:
                          enabled: false
                      yaxis:
                        - id: rain
                          title:
                            text: Rain (mm)
                          opposite: false
                        - id: temp
                          title:
                            text: Temp (Â°C)
                          opposite: true
                          decimalsInFloat: 0
                    series:
                      - entity: sensor.met_no_hourly_forecasts_full_hourly_forecast
                        name: Rain
                        type: column
                        yaxis_id: rain
                        data_generator: |
                          return entity.attributes.forecasts.map(f => {
                            let val = f.precipitation;
                            let color = '#9e9e9e';
                            if (val > 0 && val < 2.5) {
                              color = '#4FC3F7';
                            } else if (val < 7.6) {
                              color = '#0288D1';
                            } else if (val < 35) {
                              color = '#01579B';
                            } else {
                              color = '#311B92';
                            }
                            return {
                              x: new Date(f.datetime).getTime(),
                              y: val,
                              fillColor: color
                            };
                          });
                      - entity: sensor.met_no_hourly_forecasts_full_hourly_forecast
                        name: Temp
                        type: line
                        curve: smooth
                        yaxis_id: temp
                        stroke_width: 2
                        color: '#E53935'
                        data_generator: |
                          return entity.attributes.forecasts.map(f => {
                            return {
                              x: new Date(f.datetime).getTime(),
                              y: f.temperature
                            };
                          });
              - type: vertical-stack
                cards:
                  - type: custom:decluttering-card
                    template: mushroom_title_subtitle_card
                    variables:
                      - title: Wind Speed & Direction Forecast
                      - subtitle: >-
                          {% set forecasts =
                          state_attr('sensor.met_no_hourly_forecasts_full_hourly_forecast','forecasts')
                          %}{% if forecasts %}{% set speeds = forecasts |
                          map(attribute='wind_speed') | map('float') | list %}{%
                          set peak = speeds | max %}{% set peak_entry =
                          forecasts | selectattr('wind_speed','eq', peak) | list
                          | first %}{% set avg_bearing = (forecasts |
                          map(attribute='wind_bearing') | list | sum / forecasts
                          | length) %}{% set direction =
                          ['N','NNE','NE','ENE','E','ESE','SE','SSE','S','SSW','SW','WSW','W','WNW','NW','NNW'][(avg_bearing
                          / 22.5) | round(0) % 16] %}{% if peak < 2 %}{% set
                          category = 'Calm' %}{% set emoji = 'ð«ï¸' %}{% elif
                          peak < 6 %}{% set category = 'Light breeze' %}{% set
                          emoji = 'ð' %}{% elif peak < 12 %}{% set category =
                          'Gentle breeze' %}{% set emoji = 'ð¿' %}{% elif peak <
                          20 %}{% set category = 'Moderate breeze' %}{% set
                          emoji = 'ð¬ï¸' %}{% elif peak < 29 %}{% set category =
                          'Fresh breeze' %}{% set emoji = 'ð¨' %}{% elif peak <
                          39 %}{% set category = 'Strong breeze' %}{% set emoji
                          = 'ð¨' %}{% elif peak < 50 %}{% set category = 'Near
                          gale' %}{% set emoji = 'ðªï¸' %}{% elif peak < 62 %}{%
                          set category = 'Gale' %}{% set emoji = 'ðªï¸' %}{% elif
                          peak < 75 %}{% set category = 'Strong gale' %}{% set
                          emoji = 'ðªï¸' %}{% else %}{% set category = 'Storm'
                          %}{% set emoji = 'ð' %}{% endif %}{{ emoji }} Winds:
                          {{ peak | round(1) }} km/h ({{ category }}), mostly
                          from {{ direction }}, peaking {{
                          as_datetime(peak_entry.datetime).strftime('%a %I:%M
                          %p') }}.{% else %}ð¤ï¸ Winds: N/A{% endif %}
                  - type: custom:apexcharts-card
                    graph_span: 24h
                    span:
                      start: hour
                    now:
                      show: true
                    apex_config:
                      chart:
                        height: 240
                      legend:
                        show: false
                      grid:
                        yaxis:
                          lines:
                            show: false
                      xaxis:
                        crosshairs:
                          show: false
                        tooltip:
                          enabled: false
                      yaxis:
                        - id: speed
                          title:
                            text: Wind Speed (km/h)
                          opposite: false
                        - id: direction
                          title:
                            text: Direction (Â°)
                          opposite: true
                          min: 0
                          max: 360
                    series:
                      - entity: sensor.met_no_hourly_forecasts_full_hourly_forecast
                        name: Speed
                        type: line
                        curve: smooth
                        yaxis_id: speed
                        color: '#0288D1'
                        stroke_width: 2
                        data_generator: |
                          return entity.attributes.forecasts.map(f => {
                            let speed = f.wind_speed;
                            speed = Math.round(speed * 10) / 10; // round to 1 decimal place
                            return { x: new Date(f.datetime).getTime(), y: speed };
                          });
                      - entity: sensor.met_no_hourly_forecasts_full_hourly_forecast
                        name: Direction
                        type: line
                        curve: smooth
                        yaxis_id: direction
                        color: '#8E24AA'
                        stroke_width: 1
                        data_generator: |
                          return entity.attributes.forecasts.map(f => {
                            let direction = Math.round(f.wind_bearing); // round to nearest integer
                            return { x: new Date(f.datetime).getTime(), y: direction };
                          });
              - type: custom:mushroom-chips-card
                chips:
                  - type: template
                    icon: mdi:weather-partly-cloudy
                    tap_action:
                      action: navigate
                      navigation_path: '#weather'
                    content: Open Weather Panel
                    card_mod:
                      style:
                        .: |
                          ha-card {
                            --text-color: {{ 'var(--primary-background-color)' }};
                            --color: {{ 'var(--md-sys-color-on-primary)'  }};
                            --chip-background: {{ 'var(--md-sys-color-primary)' }};
                          }
                alignment: center
              - type: custom:bubble-card
                card_type: separator
                styles: |-
                  .bubble-icon,
                  .bubble-name {
                    display: none;
                  }
                  .bubble-line {
                    margin-right: 0;
                    height: 4px;
                    max-width: 32px;
                    opacity: 1;
                    background: var(--md-sys-color-on-surface-variant);
                  }
                  .bubble-separator {
                    height: min-content !important;
                    justify-content: center;
                  }
      - type: grid
        cards:
          - type: custom:navbar-card
            mobile:
              show_labels: true
            desktop:
              show_labels: true
              position: left
              min_width: 768
              show_popup_label_backgrounds: false
            routes:
              - url: /test-material-3/overview
                label: Home
                icon: m3o:home
                icon_selected: m3of:home
              - url: /test-material-3/rooms
                label: Rooms
                icon: m3o:chair
                icon_selected: m3of:chair
                tap_action:
                  action: navigate
                  navigation_path: /test-material-3/rooms
                hold_action:
                  action: open-popup
                popup:
                  - icon: m3of:computer
                    url: /test-material-3/buro
                  - icon: m3of:chair
                    url: /test-material-3/wohnzimmer
                  - icon: m3of:bed
                    url: /test-material-3/schlafzimmer
                  - icon: m3of:restaurant
                    url: /test-material-3/esszimmer
                  - icon: m3of:person-3
                    url: /test-material-3/kinderzimmer
                  - icon: m3of:groups-2
                    url: /test-material-3/gang
              - url: /test-material-3/scenes
                label: Scenes
                icon: m3o:layers
                icon_selected: m3of:layers
              - icon: mdi:dots-horizontal
                label: More
                tap_action:
                  action: open-popup
                popup:
                  - icon: m3of:tools-wrench
                    url: /config/dashboard
                  - icon: m3of:colors
                    url: /material-you-configuration
                  - icon: m3of:server-person
                    url: /test-material-3/server
                  - icon: m3of:power-settings-new
                    tap_action:
                      action: call-service
                      service: homeassistant.restart
                      service_data: {}
                      confirmation:
                        text: Are you sure you want to restart Home Assistant?
            styles: |
              .navbar-card {
                --navbar-primary-color: var(--md-sys-color-tertiary);
                background: var(--nav-background);
                backdrop-filter: blur(50px);
                -webkit-backdrop-filter: blur(20px) !important;
                background-blend-mode: overlay;
                border-radius: 20px;
                box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1);
                margin-bottom: 15px;
                overflow: hidden;
              }
            media_player:
              entity: media_player.your_media_entity
              album_cover_background: true
      - type: grid
        cards: []
    icon: m3o:home
    cards: []
    background:
      opacity: 90
      alignment: center
      size: cover
      repeat: repeat
      attachment: fixed
  - type: sections
    max_columns: 4
    title: RÃ¤ume
    path: rooms
    icon: m3o:chair
    sections:
      - type: grid
        cards:
          - type: horizontal-stack
            cards:
              - type: custom:decluttering-card
                template: mushroom_title_card
                variables:
                  - title: Rooms
          - type: horizontal-stack
            cards:
              - type: custom:stack-in-card
                mode: horizontal
                cards:
                  - type: vertical-stack
                    cards:
                      - type: custom:decluttering-card
                        template: room_summary_card
                        variables:
                          - room_name: BÃ¼ro
                          - navigation_path: /test-material-3/buro
                      - type: custom:decluttering-card
                        template: big_icon_toggle_card
                        variables:
                          - entity: light.buro
                          - icon: m3of:computer
                  - type: custom:decluttering-card
                    template: light_chip_template
                    variables:
                      entity: light.buro
                      icon: m3of:light
              - type: custom:stack-in-card
                mode: horizontal
                cards:
                  - type: vertical-stack
                    cards:
                      - type: custom:decluttering-card
                        template: room_summary_card
                        variables:
                          - room_name: Wohnzimmer
                          - temperature_sensor: sensor.living_room_temperature
                          - humidity_sensor: sensor.living_area_humidity
                          - navigation_path: /test-material-3/wohnzimmer
                      - type: custom:decluttering-card
                        template: big_icon_toggle_card
                        variables:
                          - entity: light.wohnzimmer
                          - icon: m3of:chair
                  - type: custom:mushroom-chips-card
                    chips:
                      - type: template
                        entity: light.lights_sofa
                        tap_action:
                          action: toggle
                        icon: m3of:lightbulb
                        card_mod:
                          style: |
                            ha-card {
                              --chip-background: {% if is_state('light.lights_sofa', 'on') %} #D3C890 {% else %} #353535 {% endif %};
                              --color: {% if is_state('light.lights_sofa', 'on') %} #5b5326 {% else %} #dbdbdb {% endif %};
                              justify-content: center;
                              height: 35px !important;
                              width: 35px !important;
                              border: 0 !important;
                              box-shadow: none !important;
                              border-radius: 22px !important;
                            }
                    card_mod:
                      style: |
                        .chip-container {
                          flex-flow: column wrap-reverse !important;
                          display: flex !important;
                          --chip-spacing: 8px;
                          margin: 12px;
                        }
                        .: |
                        .container {
                          align: end;
                        }
                card_mod:
                  style: |
                    ha-card {
                      background:
                      {% set temp = states('sensor.living_room_temperature') | float %}
                        {% if temp < 13 %}
                          rgba(172, 156, 175, 0.8)
                        {% elif temp < 16 %}          
                          rgba(215, 196, 219, 0.8)
                        {% elif temp < 19 %}
                          rgba(163, 217, 245, 0.8)
                        {% elif temp < 22 %}
                          rgba(205, 227, 219, 0.8)
                        {% elif temp < 24 %}
                          rgba(255, 229, 153, 0.8)
                        {% elif temp < 27 %}
                          rgba(247, 190, 129, 0.8)
                        {% else %}
                          rgba(224, 102, 102, 0.8)
                        {% endif %};             
                      max-width: 100%;
                      min-width: 50%;
                      height: 186px;
                    }
          - type: horizontal-stack
            cards:
              - type: custom:stack-in-card
                mode: horizontal
                cards:
                  - type: vertical-stack
                    cards:
                      - type: custom:decluttering-card
                        template: room_summary_card
                        variables:
                          - room_name: Schlafzimmer
                          - navigation_path: /test-material-3/schlafzimmer
                      - type: custom:decluttering-card
                        template: big_icon_toggle_card
                        variables:
                          - entity: light.schlafzimmer
                          - icon: m3of:bed
                  - type: custom:mushroom-chips-card
                    chips:    
                      - type: template
                        entity: light.philipp_sandra_fair
                        tap_action:
                          action: toggle
                        icon: m3of:light
                        card_mod:
                          style: |
                            ha-card {
                              --chip-background: {% if is_state('light.philipp_sandra_fair', 'on') %} #D3C890 {% else %} #353535 {% endif %};
                              --color: {% if is_state('light.philipp_sandra_fair', 'on') %} #5b5326 {% else %} #dbdbdb {% endif %};
                              justify-content: center;
                              height: 35px !important;
                              width: 35px !important;
                              border: 0 !important;
                              box-shadow: none !important;
                              border-radius: 22px !important;
                            }
                      - type: template
                        entity: light.philipp
                        tap_action:
                          action: toggle
                        icon: m3of:wall_lamp
                        card_mod:
                          style: |
                            ha-card {
                              --chip-background: {% if is_state('light.philipp', 'on') %} #D3C890 {% else %} #353535 {% endif %};
                              --color: {% if is_state('light.philipp', 'on') %} #5b5326 {% else %} #dbdbdb {% endif %};
                              justify-content: center;
                              height: 35px !important;
                              width: 35px !important;
                              border: 0 !important;
                              box-shadow: none !important;
                              border-radius: 22px !important;
                            }      
                      - type: template
                        entity: light.sandra
                        tap_action:
                          action: toggle
                        icon: m3of:wall_lamp
                        card_mod:
                          style: |
                            ha-card {
                              --chip-background: {% if is_state('light.sandra', 'on') %} #D3C890 {% else %} #353535 {% endif %};
                              --color: {% if is_state('light.sandra', 'on') %} #5b5326 {% else %} #dbdbdb {% endif %};
                              justify-content: center;
                              height: 35px !important;
                              width: 35px !important;
                              border: 0 !important;
                              box-shadow: none !important;
                              border-radius: 22px !important;
                            }
                    card_mod:
                      style: |
                        .chip-container {
                          flex-flow: column wrap-reverse !important;
                          display: flex !important;
                          --chip-spacing: 8px;
                          margin: 12px;
                        }
                        .: |
                        .container {
                          align: end;
                        }
              - type: custom:stack-in-card
                mode: horizontal
                cards:
                  - type: vertical-stack
                    cards:
                      - type: custom:decluttering-card
                        template: room_summary_card
                        variables:
                          - room_name: Esszimmer
                          - navigation_path: /test-material-3/esszimmer
                      - type: custom:decluttering-card
                        template: big_icon_toggle_card
                        variables:
                          - entity: light.esszimmer
                          - icon: m3of:restaurant
                  - type: custom:mushroom-chips-card
                    chips:
                      - type: template
                        entity: light.esszimmer_decke_unten
                        tap_action:
                          action: toggle
                        icon: m3of:light
                        card_mod:
                          style: |
                            ha-card {
                              --chip-background: {% if is_state('light.esszimmer_decke_unten', 'on') %} #D3C890 {% else %} #353535 {% endif %};
                              --color: {% if is_state('light.esszimmer_decke_unten', 'on') %} #5b5326 {% else %} #dbdbdb {% endif %};
                              justify-content: center;
                              height: 35px !important;
                              width: 35px !important;
                              border: 0 !important;
                              box-shadow: none !important;
                              border-radius: 22px !important;
                            }                            
                      - type: template
                        entity: light.esszimmer_decke_oben
                        tap_action:
                          action: toggle
                        icon: m3of:light
                        card_mod:
                          style: |
                            ha-card {
                              --chip-background: {% if is_state('light.esszimmer_decke_oben', 'on') %} #D3C890 {% else %} #353535 {% endif %};
                              --color: {% if is_state('light.esszimmer_decke_oben', 'on') %} #5b5326 {% else %} #dbdbdb {% endif %};
                              justify-content: center;
                              height: 35px !important;
                              width: 35px !important;
                              border: 0 !important;
                              box-shadow: none !important;
                              border-radius: 22px !important;
                            }    
                      - type: template
                        entity: light.wohnzimmer_decke_garderobe
                        tap_action:
                          action: toggle
                        icon: m3of:light
                        card_mod:
                          style: |
                            ha-card {
                              --chip-background: {% if is_state('light.wohnzimmer_decke_garderobe', 'on') %} #D3C890 {% else %} #353535 {% endif %};
                              --color: {% if is_state('light.wohnzimmer_decke_garderobe', 'on') %} #5b5326 {% else %} #dbdbdb {% endif %};
                              justify-content: center;
                              height: 35px !important;
                              width: 35px !important;
                              border: 0 !important;
                              box-shadow: none !important;
                              border-radius: 22px !important;
                            }   
                    card_mod:
                      style: |
                        .chip-container {
                          flex-flow: column wrap-reverse !important;
                          display: flex !important;
                          --chip-spacing: 8px;
                          margin: 12px;
                        }
                        .: |
                        .container {
                          align: end;
                        }
          - type: horizontal-stack
            cards:
              - type: custom:stack-in-card
                mode: horizontal
                cards:
                - type: vertical-stack
                  cards:
                    - type: custom:decluttering-card
                      template: room_summary_card
                      variables:
                        - room_name: Kinderzimmer
                        - navigation_path: /test-material-3/kinderzimmer
                    - type: custom:decluttering-card
                      template: big_icon_toggle_card
                      variables:
                        - entity: light.kinderzimmer
                        - icon: m3of:girl
                - type: custom:mushroom-chips-card
                  chips:
                    - type: template
                      entity: light.kinderzimmer_enrave
                      tap_action:
                        action: toggle
                      icon: m3of:light
                      card_mod:
                        style: |
                          ha-card {
                            --chip-background: {% if is_state('light.kinderzimmer_enrave', 'on') %} #D3C890 {% else %} #353535 {% endif %};
                            --color: {% if is_state('light.kinderzimmer_enrave', 'on') %} #5b5326 {% else %} #dbdbdb {% endif %};
                            justify-content: center;
                            height: 35px !important;
                            width: 35px !important;
                            border: 0 !important;
                            box-shadow: none !important;
                            border-radius: 22px !important;
                          }
                    - type: template
                      entity: light.lia_light_strip
                      tap_action:
                        action: toggle
                      icon: m3of:backlight_high
                      card_mod:
                        style: |
                          ha-card {
                            --chip-background: {% if is_state('light.lia_light_strip', 'on') %} #D3C890 {% else %} #353535 {% endif %};
                            --color: {% if is_state('light.lia_light_strip', 'on') %} #5b5326 {% else %} #dbdbdb {% endif %};
                            justify-content: center;
                            height: 35px !important;
                            width: 35px !important;
                            border: 0 !important;
                            box-shadow: none !important;
                            border-radius: 22px !important;
                          }
                  card_mod:
                    style: |
                      .chip-container {
                        flex-flow: column wrap-reverse !important;
                        display: flex !important;
                        --chip-spacing: 8px;
                        margin: 12px;
                      }
                      .: |
                      .container {
                        align: end;
                      }
              - type: custom:stack-in-card
                mode: horizontal
                cards:
                  - type: vertical-stack
                    cards:
                      - type: custom:decluttering-card
                        template: room_summary_card
                        variables:
                          - room_name: Gang
                          - navigation_path: /test-material-3/gang
                      - type: custom:decluttering-card
                        template: big_icon_toggle_card
                        variables:
                          - entity: light.gang
                          - icon: m3of:hallway
                  - type: custom:mushroom-chips-card
                    chips:
                      - type: template
                        entity: light.gang_farbig_1_schlafzimmer
                        tap_action:
                          action: toggle
                        icon: m3of:light
                        card_mod:
                          style: |
                            ha-card {
                              --chip-background: {% if is_state('light.gang_farbig_1_schlafzimmer', 'on') %} #D3C890 {% else %} #353535 {% endif %};
                              --color: {% if is_state('light.gang_farbig_1_schlafzimmer', 'on') %} #5b5326 {% else %} #dbdbdb {% endif %};
                              justify-content: center;
                              height: 35px !important;
                              width: 35px !important;
                              border: 0 !important;
                              box-shadow: none !important;
                              border-radius: 22px !important;
                            }
                      - type: template
                        entity: light.gang_farbig_2_buro
                        tap_action:
                          action: toggle
                        icon: m3of:light
                        card_mod:
                          style: |
                            ha-card {
                              --chip-background: {% if is_state('light.gang_farbig_2_buro', 'on') %} #D3C890 {% else %} #353535 {% endif %};
                              --color: {% if is_state('light.gang_farbig_2_buro', 'on') %} #5b5326 {% else %} #dbdbdb {% endif %};
                              justify-content: center;
                              height: 35px !important;
                              width: 35px !important;
                              border: 0 !important;
                              box-shadow: none !important;
                              border-radius: 22px !important;
                            }
                      - type: template
                        entity: light.gang_farbig_3_pinwand
                        tap_action:
                          action: toggle
                        icon: m3of:light
                        card_mod:
                          style: |
                            ha-card {
                              --chip-background: {% if is_state('light.gang_farbig_3_pinwand', 'on') %} #D3C890 {% else %} #353535 {% endif %};
                              --color: {% if is_state('light.gang_farbig_3_pinwand', 'on') %} #5b5326 {% else %} #dbdbdb {% endif %};
                              justify-content: center;
                              height: 35px !important;
                              width: 35px !important;
                              border: 0 !important;
                              box-shadow: none !important;
                              border-radius: 22px !important;
                            }
                      - type: template
                        entity: light.gang_farbig_4_lia
                        tap_action:
                          action: toggle
                        icon: m3of:light
                        card_mod:
                          style: |
                            ha-card {
                              --chip-background: {% if is_state('light.gang_farbig_4_lia', 'on') %} #D3C890 {% else %} #353535 {% endif %};
                              --color: {% if is_state('light.gang_farbig_4_lia', 'on') %} #5b5326 {% else %} #dbdbdb {% endif %};
                              justify-content: center;
                              height: 35px !important;
                              width: 35px !important;
                              border: 0 !important;
                              box-shadow: none !important;
                              border-radius: 22px !important;
                            }      
                    card_mod:
                      style: |
                        .chip-container {
                          flex-flow: column wrap-reverse !important;
                          display: flex !important;
                          --chip-spacing: 8px;
                          margin: 12px;
                        }
                        .: |
                        .container {
                          align: end;
                        }
          - type: horizontal-stack
            cards:
              - type: custom:stack-in-card
                mode: horizontal
                cards:
                - type: vertical-stack
                  cards:
                    - type: custom:decluttering-card
                      template: room_summary_card
                      variables:
                        - room_name: Eingang
                        - navigation_path: /test-material-3/eingang
                    - type: custom:decluttering-card
                      template: big_icon_toggle_card
                      variables:
                        - entity: light.eingang
                        - icon: m3of:door_front
                - type: custom:mushroom-chips-card
                  chips:
                    - type: template
                      entity: light.eingang
                      tap_action:
                        action: toggle
                      icon: m3of:light
                      card_mod:
                        style: |
                          ha-card {
                            --chip-background: {% if is_state('light.eingang', 'on') %} #D3C890 {% else %} #353535 {% endif %};
                            --color: {% if is_state('light.eingang', 'on') %} #5b5326 {% else %} #dbdbdb {% endif %};
                            justify-content: center;
                            height: 35px !important;
                            width: 35px !important;
                            border: 0 !important;
                            box-shadow: none !important;
                            border-radius: 22px !important;
                          }
                  card_mod:
                    style: |
                      .chip-container {
                        flex-flow: column wrap-reverse !important;
                        display: flex !important;
                        --chip-spacing: 8px;
                        margin: 12px;
                      }
                      .: |
                      .container {
                        align: end;
                      }
      - type: grid
        cards:
          - type: custom:navbar-card
            mobile:
              show_labels: true
            desktop:
              show_labels: true
              position: left
              min_width: 768
            routes:
              - url: /test-material-3/overview
                label: Home
                icon: m3o:home
                icon_selected: m3of:home
              - url: /test-material-3/rooms
                label: RÃ¤ume
                icon: m3o:chair
                icon_selected: m3of:chair
                tap_action:
                  action: navigate
                  navigation_path: /test-material-3/rooms
                hold_action:
                  action: open-popup
                popup:
                  - icon: m3of:computer
                    url: /test-material-3/buro
                  - icon: m3of:chair
                    url: /test-material-3/wohnzimmer
                  - icon: m3of:bed
                    url: /test-material-3/schlafzimmer
                  - icon: m3of:restaurant
                    url: /test-material-3/esszimmer
                  - icon: m3of:person-3
                    url: /test-material-3/kinderzimmer
                  - icon: m3of:groups-2
                    url: /test-material-3/gang
              - url: /test-material-3/scenes
                label: Scenes
                icon: m3o:layers
                icon_selected: m3of:layers
              - icon: mdi:dots-horizontal
                label: More
                tap_action:
                  action: open-popup
                popup:
                  - icon: m3of:tools-wrench
                    url: /config/dashboard
            styles: |
              .navbar-card {
                --navbar-primary-color: var(--md-sys-color-tertiary);
                background: var(--nav-background);
                backdrop-filter: blur(50px);
                -webkit-backdrop-filter: blur(20px) !important;
                background-blend-mode: overlay;
                border-radius: 20px;
                box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1);
                margin-bottom: 15px;
                overflow: hidden;
              }
    badges:
      - type: custom:mushroom-chips-card
        chips:
          - type: template
            tap_action:
              action: navigate
              navigation_path: /test-material-3/overview
            icon: m3of:arrow-left-alt
            card_mod:
              style:
                .: |
                  ha-card {
                    --color: {{ 'var(--md-sys-color-on-primary)' }};
                    --chip-background: {{ 'var(--md-sys-color-primary)' }};
                    margin-top: 0.7em;
                  }
    header:
      layout: responsive
      badges_position: top
      badges_wrap: wrap
    cards: []
    background:
      opacity: 90
      alignment: center
      size: cover
      repeat: repeat
      attachment: fixed
      image: null
  - type: sections
    max_columns: 4
    title: Scenes
    path: scenes
    icon: m3o:layers
    sections:
      - type: grid
        cards:
          - type: custom:decluttering-card
            template: mushroom_title_card
            variables:
              - title: Scenes Preset
          - type: custom:mushroom-title-card
            subtitle: Refreshing
            title: ''
          - type: custom:simple-swipe-card
            view_mode: carousel
            card_min_width: 400
            card_spacing: 8
            show_pagination: false
            auto_hide_pagination: 0
            loop_mode: infinite
            cards:
              - type: horizontal-stack
                cards:
                  - type: picture
                    image: /local/hue/raw/Blossom.png
                    tap_action:
                      action: call-service
                      service: input_text.set_value
                      data:
                        entity_id: input_text.dynamic_scene_selected
                        value: blossom
                  - type: picture
                    image: /local/hue/raw/Crocus.png
                    tap_action:
                      action: call-service
                      service: input_text.set_value
                      data:
                        entity_id: input_text.dynamic_scene_selected
                        value: crocus
              - type: horizontal-stack
                cards:
                  - type: picture
                    image: /local/hue/raw/Precious.png
                    tap_action:
                      action: call-service
                      service: input_text.set_value
                      data:
                        entity_id: input_text.dynamic_scene_selected
                        value: precious
                  - type: picture
                    image: /local/hue/raw/Narcissa.png
                    tap_action:
                      action: call-service
                      service: input_text.set_value
                      data:
                        entity_id: input_text.dynamic_scene_selected
                        value: narcissa
          - type: custom:mushroom-title-card
            subtitle: Peaceful
            title: ''
          - type: custom:simple-swipe-card
            view_mode: carousel
            card_min_width: 400
            card_spacing: 8
            show_pagination: false
            auto_hide_pagination: 0
            loop_mode: infinite
            cards:
              - type: horizontal-stack
                cards:
                  - type: picture
                    image: /local/hue/raw/Mountain breeze.png
                    tap_action:
                      action: call-service
                      service: input_text.set_value
                      data:
                        entity_id: input_text.dynamic_scene_selected
                        value: mountain_breeze
                  - type: picture
                    image: /local/hue/raw/Lake mist.png
                    tap_action:
                      action: call-service
                      service: input_text.set_value
                      data:
                        entity_id: input_text.dynamic_scene_selected
                        value: lake_mist
              - type: horizontal-stack
                cards:
                  - type: picture
                    image: /local/hue/raw/Sunday morning.png
                    tap_action:
                      action: call-service
                      service: input_text.set_value
                      data:
                        entity_id: input_text.dynamic_scene_selected
                        value: sunday_morning
                  - type: picture
                    image: /local/hue/raw/Spring blossom.png
                    tap_action:
                      action: call-service
                      service: input_text.set_value
                      data:
                        entity_id: input_text.dynamic_scene_selected
                        value: spring_blossom
          - type: custom:mushroom-title-card
            subtitle: Cozy
            title: ''
          - type: custom:simple-swipe-card
            view_mode: carousel
            card_min_width: 400
            card_spacing: 8
            show_pagination: false
            auto_hide_pagination: 0
            loop_mode: infinite
            cards:
              - type: horizontal-stack
                cards:
                  - type: picture
                    image: /local/hue/raw/Rolling hills.png
                    tap_action:
                      action: call-service
                      service: input_text.set_value
                      data:
                        entity_id: input_text.dynamic_scene_selected
                        value: rolling_hills
                  - type: picture
                    image: /local/hue/raw/Dreamy dusk.png
                    tap_action:
                      action: call-service
                      service: input_text.set_value
                      data:
                        entity_id: input_text.dynamic_scene_selected
                        value: dreamy_dusk
              - type: horizontal-stack
                cards:
                  - type: picture
                    image: /local/hue/raw/Savannah sunset.png
                    tap_action:
                      action: call-service
                      service: input_text.set_value
                      data:
                        entity_id: input_text.dynamic_scene_selected
                        value: savannah_sunset
                  - type: picture
                    image: /local/hue/raw/Ruby glow.png
                    tap_action:
                      action: call-service
                      service: input_text.set_value
                      data:
                        entity_id: input_text.dynamic_scene_selected
                        value: ruby_glow
              - type: horizontal-stack
                cards:
                  - type: picture
                    image: /local/hue/raw/Golden pond.png
                    tap_action:
                      action: call-service
                      service: input_text.set_value
                      data:
                        entity_id: input_text.dynamic_scene_selected
                        value: golden_pond
                  - type: picture
                    image: /local/hue/raw/Tropical twilight.png
                    tap_action:
                      action: call-service
                      service: input_text.set_value
                      data:
                        entity_id: input_text.dynamic_scene_selected
                        value: tropical_twilight
          - type: custom:mushroom-title-card
            subtitle: Dreamy
            title: ''
          - type: custom:simple-swipe-card
            view_mode: carousel
            card_min_width: 400
            card_spacing: 8
            show_pagination: false
            auto_hide_pagination: 0
            loop_mode: infinite
            cards:
              - type: horizontal-stack
                cards:
                  - type: picture
                    image: /local/hue/raw/Still waters.png
                    tap_action:
                      action: call-service
                      service: input_text.set_value
                      data:
                        entity_id: input_text.dynamic_scene_selected
                        value: still_waters
                  - type: picture
                    image: /local/hue/raw/Adrift.png
                    tap_action:
                      action: call-service
                      service: input_text.set_value
                      data:
                        entity_id: input_text.dynamic_scene_selected
                        value: adrift
              - type: horizontal-stack
                cards:
                  - type: picture
                    image: /local/hue/raw/Blue lagoon.png
                    tap_action:
                      action: call-service
                      service: input_text.set_value
                      data:
                        entity_id: input_text.dynamic_scene_selected
                        value: blue_lagoon
                  - type: picture
                    image: /local/hue/raw/Palm Beach.png
                    tap_action:
                      action: call-service
                      service: input_text.set_value
                      data:
                        entity_id: input_text.dynamic_scene_selected
                        value: palm_beach
              - type: horizontal-stack
                cards:
                  - type: picture
                    image: /local/hue/raw/Majestic morning.png
                    tap_action:
                      action: call-service
                      service: input_text.set_value
                      data:
                        entity_id: input_text.dynamic_scene_selected
                        value: majestic_morning
                  - type: picture
                    image: /local/hue/raw/Pensive.png
                    tap_action:
                      action: call-service
                      service: input_text.set_value
                      data:
                        entity_id: input_text.dynamic_scene_selected
                        value: pensive
          - type: custom:mushroom-title-card
            subtitle: Pure
            title: ''
          - type: custom:simple-swipe-card
            view_mode: carousel
            card_min_width: 400
            card_spacing: 8
            show_pagination: false
            auto_hide_pagination: 0
            loop_mode: infinite
            cards:
              - type: horizontal-stack
                cards:
                  - type: picture
                    image: /local/hue/raw/Amethyst Valley.png
                    tap_action:
                      action: call-service
                      service: input_text.set_value
                      data:
                        entity_id: input_text.dynamic_scene_selected
                        value: amethyst_valley
                  - type: picture
                    image: /local/hue/raw/Hazy Days.png
                    tap_action:
                      action: call-service
                      service: input_text.set_value
                      data:
                        entity_id: input_text.dynamic_scene_selected
                        value: hazy_days
              - type: horizontal-stack
                cards:
                  - type: picture
                    image: /local/hue/raw/Spring lake.png
                    tap_action:
                      action: call-service
                      service: input_text.set_value
                      data:
                        entity_id: input_text.dynamic_scene_selected
                        value: spring_lake
                  - type: picture
                    image: /local/hue/raw/Midwinter.png
                    tap_action:
                      action: call-service
                      service: input_text.set_value
                      data:
                        entity_id: input_text.dynamic_scene_selected
                        value: midwinter
              - type: horizontal-stack
                cards:
                  - type: picture
                    image: /local/hue/raw/Autumn gold.png
                    tap_action:
                      action: call-service
                      service: input_text.set_value
                      data:
                        entity_id: input_text.dynamic_scene_selected
                        value: autumn_gold
                  - type: picture
                    image: /local/hue/raw/Misty ridge.png
                    tap_action:
                      action: call-service
                      service: input_text.set_value
                      data:
                        entity_id: input_text.dynamic_scene_selected
                        value: misty_ridge
          - type: custom:mushroom-title-card
            subtitle: Serenity
            title: ''
          - type: custom:simple-swipe-card
            view_mode: carousel
            card_min_width: 400
            card_spacing: 8
            show_pagination: false
            auto_hide_pagination: 0
            loop_mode: infinite
            cards:
              - type: horizontal-stack
                cards:
                  - type: picture
                    image: /local/hue/raw/Galaxy.png
                    tap_action:
                      action: call-service
                      service: input_text.set_value
                      data:
                        entity_id: input_text.dynamic_scene_selected
                        value: galaxy
                  - type: picture
                    image: /local/hue/raw/Arctic aurora.png
                    tap_action:
                      action: call-service
                      service: input_text.set_value
                      data:
                        entity_id: input_text.dynamic_scene_selected
                        value: arctic_aurora
              - type: horizontal-stack
                cards:
                  - type: picture
                    image: /local/hue/raw/Moonlight.png
                    tap_action:
                      action: call-service
                      service: input_text.set_value
                      data:
                        entity_id: input_text.dynamic_scene_selected
                        value: moonlight
                  - type: picture
                    image: /local/hue/raw/Nebula.png
                    tap_action:
                      action: call-service
                      service: input_text.set_value
                      data:
                        entity_id: input_text.dynamic_scene_selected
                        value: nebula
              - type: horizontal-stack
                cards:
                  - type: picture
                    image: /local/hue/raw/Starlight.png
                    tap_action:
                      action: call-service
                      service: input_text.set_value
                      data:
                        entity_id: input_text.dynamic_scene_selected
                        value: starlight
                  - type: picture
                    image: /local/hue/raw/Blood moon.png
                    tap_action:
                      action: call-service
                      service: input_text.set_value
                      data:
                        entity_id: input_text.dynamic_scene_selected
                        value: blood_moon
          - type: custom:mushroom-title-card
            subtitle: Romantic
            title: ''
          - type: custom:simple-swipe-card
            view_mode: carousel
            card_min_width: 400
            card_spacing: 8
            show_pagination: false
            auto_hide_pagination: 0
            loop_mode: infinite
            cards:
              - type: horizontal-stack
                cards:
                  - type: picture
                    image: /local/hue/raw/Ruby romance.png
                    tap_action:
                      action: call-service
                      service: input_text.set_value
                      data:
                        entity_id: input_text.dynamic_scene_selected
                        value: ruby_romance
                  - type: picture
                    image: /local/hue/raw/City of love.png
                    tap_action:
                      action: call-service
                      service: input_text.set_value
                      data:
                        entity_id: input_text.dynamic_scene_selected
                        value: city_of_love
              - type: horizontal-stack
                cards:
                  - type: picture
                    image: /local/hue/raw/Sunset allure.png
                    tap_action:
                      action: call-service
                      service: input_text.set_value
                      data:
                        entity_id: input_text.dynamic_scene_selected
                        value: sunset_allure
                  - type: picture
                    image: /local/hue/raw/Lovebirds.png
                    tap_action:
                      action: call-service
                      service: input_text.set_value
                      data:
                        entity_id: input_text.dynamic_scene_selected
                        value: lovebirds
              - type: horizontal-stack
                cards:
                  - type: picture
                    image: /local/hue/raw/Smitten.png
                    tap_action:
                      action: call-service
                      service: input_text.set_value
                      data:
                        entity_id: input_text.dynamic_scene_selected
                        value: smitten
                  - type: picture
                    image: /local/hue/raw/Promise.png
                    tap_action:
                      action: call-service
                      service: input_text.set_value
                      data:
                        entity_id: input_text.dynamic_scene_selected
                        value: promise
          - type: custom:mushroom-title-card
            subtitle: Party
            title: ''
          - type: custom:simple-swipe-card
            view_mode: carousel
            card_min_width: 400
            card_spacing: 8
            show_pagination: false
            auto_hide_pagination: 0
            loop_mode: infinite
            cards:
              - type: horizontal-stack
                cards:
                  - type: picture
                    image: /local/hue/raw/Fairfax.png
                    tap_action:
                      action: call-service
                      service: input_text.set_value
                      data:
                        entity_id: input_text.dynamic_scene_selected
                        value: fairfax
                  - type: picture
                    image: /local/hue/raw/Tokyo.png
                    tap_action:
                      action: call-service
                      service: input_text.set_value
                      data:
                        entity_id: input_text.dynamic_scene_selected
                        value: tokyo
              - type: horizontal-stack
                cards:
                  - type: picture
                    image: /local/hue/raw/Miami.png
                    tap_action:
                      action: call-service
                      service: input_text.set_value
                      data:
                        entity_id: input_text.dynamic_scene_selected
                        value: miami
                  - type: picture
                    image: /local/hue/raw/Cancun.png
                    tap_action:
                      action: call-service
                      service: input_text.set_value
                      data:
                        entity_id: input_text.dynamic_scene_selected
                        value: cancun
              - type: horizontal-stack
                cards:
                  - type: picture
                    image: /local/hue/raw/Osaka.png
                    tap_action:
                      action: call-service
                      service: input_text.set_value
                      data:
                        entity_id: input_text.dynamic_scene_selected
                        value: osaka
                  - type: picture
                    image: /local/hue/raw/Motown.png
                    tap_action:
                      action: call-service
                      service: input_text.set_value
                      data:
                        entity_id: input_text.dynamic_scene_selected
                        value: motown
              - type: horizontal-stack
                cards:
                  - type: picture
                    image: /local/hue/raw/Ibiza.png
                    tap_action:
                      action: call-service
                      service: input_text.set_value
                      data:
                        entity_id: input_text.dynamic_scene_selected
                        value: ibiza
                  - type: picture
                    image: /local/hue/raw/Chinatown.png
                    tap_action:
                      action: call-service
                      service: input_text.set_value
                      data:
                        entity_id: input_text.dynamic_scene_selected
                        value: chinatown
          - type: custom:mushroom-title-card
            subtitle: Luxurious
            title: ''
          - type: custom:simple-swipe-card
            view_mode: carousel
            card_min_width: 400
            card_spacing: 8
            show_pagination: false
            auto_hide_pagination: 0
            loop_mode: infinite
            cards:
              - type: horizontal-stack
                cards:
                  - type: picture
                    image: /local/hue/raw/Emerald flutter.png
                    tap_action:
                      action: call-service
                      service: input_text.set_value
                      data:
                        entity_id: input_text.dynamic_scene_selected
                        value: emerald_flutter
                  - type: picture
                    image: /local/hue/raw/Memento.png
                    tap_action:
                      action: call-service
                      service: input_text.set_value
                      data:
                        entity_id: input_text.dynamic_scene_selected
                        value: memento
              - type: horizontal-stack
                cards:
                  - type: picture
                    image: /local/hue/raw/Resplendent.png
                    tap_action:
                      action: call-service
                      service: input_text.set_value
                      data:
                        entity_id: input_text.dynamic_scene_selected
                        value: resplendent
                  - type: picture
                    image: /local/hue/raw/Scarlet dream.png
                    tap_action:
                      action: call-service
                      service: input_text.set_value
                      data:
                        entity_id: input_text.dynamic_scene_selected
                        value: scarlet_dream
          - type: custom:mushroom-title-card
            subtitle: Race Day
            title: ''
          - type: custom:simple-swipe-card
            view_mode: carousel
            card_min_width: 400
            card_spacing: 8
            show_pagination: false
            auto_hide_pagination: 0
            loop_mode: infinite
            cards:
              - type: horizontal-stack
                cards:
                  - type: picture
                    image: /local/hue/raw/Zandvoort.png
                    tap_action:
                      action: call-service
                      service: input_text.set_value
                      data:
                        entity_id: input_text.dynamic_scene_selected
                        value: zandvoort
                  - type: picture
                    image: /local/hue/raw/Bahrain.png
                    tap_action:
                      action: call-service
                      service: input_text.set_value
                      data:
                        entity_id: input_text.dynamic_scene_selected
                        value: bahrain
              - type: horizontal-stack
                cards:
                  - type: picture
                    image: /local/hue/raw/Silverstone.png
                    tap_action:
                      action: call-service
                      service: input_text.set_value
                      data:
                        entity_id: input_text.dynamic_scene_selected
                        value: silverstone
                  - type: picture
                    image: /local/hue/raw/Sao Paulo.png
                    tap_action:
                      action: call-service
                      service: input_text.set_value
                      data:
                        entity_id: input_text.dynamic_scene_selected
                        value: sao_paulo
          - type: custom:mushroom-title-card
            subtitle: Holiday
            title: ''
          - type: custom:simple-swipe-card
            view_mode: carousel
            card_min_width: 400
            card_spacing: 8
            show_pagination: false
            auto_hide_pagination: 0
            loop_mode: infinite
            cards:
              - type: horizontal-stack
                cards:
                  - type: picture
                    image: /local/hue/raw/Under The Tree.png
                    tap_action:
                      action: call-service
                      service: input_text.set_value
                      data:
                        entity_id: input_text.dynamic_scene_selected
                        value: under_the_tree
                  - type: picture
                    image: /local/hue/raw/Snow Sparkle.png
                    tap_action:
                      action: call-service
                      service: input_text.set_value
                      data:
                        entity_id: input_text.dynamic_scene_selected
                        value: snow_sparkle
              - type: horizontal-stack
                cards:
                  - type: picture
                    image: /local/hue/raw/Silent Night.png
                    tap_action:
                      action: call-service
                      service: input_text.set_value
                      data:
                        entity_id: input_text.dynamic_scene_selected
                        value: silent_night
                  - type: picture
                    image: /local/hue/raw/Rosy Sparkle.png
                    tap_action:
                      action: call-service
                      service: input_text.set_value
                      data:
                        entity_id: input_text.dynamic_scene_selected
                        value: rosy_sparkle
              - type: horizontal-stack
                cards:
                  - type: picture
                    image: /local/hue/raw/Color Burst.png
                    tap_action:
                      action: call-service
                      service: input_text.set_value
                      data:
                        entity_id: input_text.dynamic_scene_selected
                        value: color_burst
                  - type: picture
                    image: /local/hue/raw/Festive Fun.png
                    tap_action:
                      action: call-service
                      service: input_text.set_value
                      data:
                        entity_id: input_text.dynamic_scene_selected
                        value: festive_fun
      - type: grid
        cards:
          - type: vertical-stack
            cards:
              - type: custom:bubble-card
                card_type: pop-up
                hash: '#room-selector'
                margin_top_mobile: calc(96vh - 800px)
                name: Room Selector
                icon: m3o:room-preferences
                styles: |-
                  #root {
                          height: unset !important;
                          max-height: 100% !important;
                          transition: transform var(--md-sys-motion-expressive-spatial-default) !important;
                        }
                        .bubble-pop-up-container {
                          padding-bottom: 64px !important;

                        }
                bg_color: var(--card-background-color)
                button_type: name
              - type: horizontal-stack
                cards:
                  - type: custom:mushroom-template-card
                    icon: m3of:table-restaurant
                    primary: Dining
                    secondary: >-
                      {{ states('input_text.dining_table_dynamic_scene_active')
                      }}
                    tap_action:
                      action: call-service
                      service: script.toggle_or_apply_dynamic_scene
                      data:
                        room_lights:
                          - light.light_one_dt
                          - light.light_two_dt
                          - light.light_three_dt
                          - light.light_one_ktc_dt
                          - light.light_two_ktc_dt
                          - light.light_three_ktc_dt
                        presence_automation:
                          - automation.room_presence_dining_table
                        room_boolean: input_boolean.dining_table_dynamic_scene
                        room_scene_tracker: input_text.dining_table_dynamic_scene_active
                    color: >-
                      {% if
                      states('input_text.dining_table_dynamic_scene_active') !=
                      '' %}
                        #d53e4f
                      {% else %}
                        #aaaaaa
                      {% endif %}
                    features_position: bottom
                  - type: custom:mushroom-template-card
                    icon: m3of:chair
                    primary: Sofa
                    tap_action:
                      action: call-service
                      service: script.toggle_or_apply_dynamic_scene
                      data:
                        room_lights:
                          - light.light_one_sofa
                          - light.light_two_sofa
                          - light.light_three_sofa
                          - light.light_four_sofa
                          - light.light_three_dt
                          - light.light_three_ktc_dt
                        presence_automation:
                          - automation.room_presence_sofa
                          - automation.sofa_sensor_workaround
                        room_boolean: input_boolean.sofa_dynamic_scene
                        room_scene_tracker: input_text.sofa_dynamic_scene_active
                    secondary: '{{ states(''input_text.sofa_dynamic_scene_active'') }}'
                    color: >-
                      {% if states('input_text.sofa_dynamic_scene_active') != ''
                      %}
                        #fc8d59
                      {% else %}
                        #aaaaaa
                      {% endif %}
                    features_position: bottom
              - type: horizontal-stack
                cards:
                  - type: custom:mushroom-template-card
                    icon: m3of:bed
                    primary: Schlafzimmer
                    tap_action:
                      action: call-service
                      service: script.toggle_or_apply_dynamic_scene
                      data:
                        room_lights:
                          - light.light_one_mbr
                          - light.light_two_mbr
                    features_position: bottom
                  - type: custom:mushroom-template-card
                    icon: m3of:restaurant
                    primary: Esszimmer
                    tap_action:
                      action: call-service
                      service: script.toggle_or_apply_dynamic_scene
                      data:
                        room_lights:
                          - light.light_one_br
                          - light.light_two_br
                        room_boolean: input_boolean.baby_room_dynamic_scene
                        room_scene_tracker: input_text.baby_room_dynamic_scene_active
                    secondary: '{{ states(''input_text.baby_room_dynamic_scene_active'') }}'
                    color: >-
                      {% if states('input_text.baby_room_dynamic_scene_active')
                      != '' %}
                        #e6f598
                      {% else %}
                        #aaaaaa
                      {% endif %}
                    features_position: bottom
              - type: horizontal-stack
                cards:
                  - type: custom:mushroom-template-card
                    icon: m3of:person-3
                    primary: Kinderzimmer
                    tap_action:
                      action: perform-action
                      data:
                        room_lights:
                          - light.light_one_sgr
                          - light.light_two_sgr
                    features_position: bottom
                  - type: custom:mushroom-template-card
                    icon: m3of:groups-2
                    primary: Multiple
                    tap_action:
                      action: perform-action
                      data:
                        room_lights:
                          - light.light_one_mgr
                          - light.light_two_mgr
                        presence_automation: automation.room_presence_multiple_guest_room
                        room_boolean: input_boolean.multiple_guest_room_dynamic_scene
                        room_scene_tracker: input_text.multiple_guest_room_dynamic_scene_active
                      perform_action: script.toggle_or_apply_dynamic_scene
                      target: {}
                    secondary: >-
                      {{
                      states('input_text.multiple_guest_room_dynamic_scene_active')
                      }}
                    color: >-
                      {% if
                      states('input_text.multiple_guest_room_dynamic_scene_active')
                      != '' %}
                        #000000
                      {% else %}
                        #aaaaaa
                      {% endif %}
                    features_position: bottom
              - type: custom:expander-card
                child-margin-top: 0.6em
                padding: 0
                clear: true
                title-card-button-overlay: true
                title-card-clickable: true
                expanded: true
                title-card:
                  type: custom:mushroom-title-card
                  subtitle: Scene Controls
                  card_mod:
                    style: |
                      ha-card {
                        --title-font-size: 20px !important;
                         transform: translateY(-16px);
                      }
                cards:
                  - type: horizontal-stack
                    cards:
                      - type: custom:mushroom-number-card
                        entity: input_number.dynamic_scene_brightness
                        name: Brightness
                        icon: mdi:brightness-6
                        display_mode: slider
                        fill_container: true
                        card_mod:
                          style:
                            .: |
                              ha-state-icon {
                                color: var(--md-sys-color-secondary);
                              }
                            mushroom-shape-icon$: |
                              .shape {
                                --shape-color: var(--md-sys-color-on-secondary) !important;
                              }
                            mushroom-number-value-control$: |
                              mushroom-slider {
                                --main-color: var(--md-sys-color-on-secondary) !important;
                                --bg-color: var(--md-sys-color-secondary) !important;
                              }
                      - type: custom:mushroom-number-card
                        entity: input_number.dynamic_scene_interval
                        name: Interval
                        icon: mdi:timer
                        display_mode: slider
                        fill_container: true
                        card_mod:
                          style:
                            .: |
                              ha-state-icon {
                                color: var(--md-sys-color-secondary);
                              }
                            mushroom-shape-icon$: |
                              .shape {
                                --shape-color: var(--md-sys-color-on-secondary) !important;
                              }
                            mushroom-number-value-control$: |
                              mushroom-slider {
                                --main-color: var(--md-sys-color-on-secondary) !important;
                                --bg-color: var(--md-sys-color-secondary) !important;
                              }
              - type: custom:bubble-card
                card_type: separator
                styles: |-
                  .bubble-icon,
                  .bubble-name {
                    display: none;
                  }
                  .bubble-line {
                    margin-right: 0;
                    height: 4px;
                    max-width: 32px;
                    opacity: 1;
                    background: var(--md-sys-color-on-surface-variant);
                  }
                  .bubble-separator {
                    height: min-content !important;
                    justify-content: center;
                  }
      - type: grid
        cards:
          - type: custom:navbar-card
            mobile:
              show_labels: true
            desktop:
              show_labels: true
              position: left
              min_width: 768
            routes:
              - url: /test-material-3/overview
                label: Home
                icon: m3o:home
                icon_selected: m3of:home
              - url: /test-material-3/rooms
                label: RÃ¤ume
                icon: m3o:chair
                icon_selected: m3of:chair
                tap_action:
                  action: navigate
                  navigation_path: /test-material-3/rooms
                hold_action:
                  action: open-popup
                popup:
                  - icon: m3of:computer
                    url: /test-material-3/buro
                  - icon: m3of:chair
                    url: /test-material-3/wohnzimmer
                  - icon: m3of:bed
                    url: /test-material-3/schlafzimmer
                  - icon: m3of:restaurant
                    url: /test-material-3/esszimmer
                  - icon: m3of:person-3
                    url: /test-material-3/kinderzimmer
                  - icon: m3of:groups-2
                    url: /test-material-3/gang
              - url: /test-material-3/scenes
                label: Scenes
                icon: m3o:layers
                icon_selected: m3of:layers
              - icon: mdi:dots-horizontal
                label: More
                tap_action:
                  action: open-popup
                popup:
                  - icon: m3of:tools-wrench
                    url: /config/dashboard
                  - icon: m3o:room-preferences
                    url: '#room-selector'
            styles: |
              .navbar-card {
                --navbar-primary-color: var(--md-sys-color-tertiary);
                background: var(--nav-background);
                backdrop-filter: blur(50px);
                -webkit-backdrop-filter: blur(20px) !important;
                background-blend-mode: overlay;
                border-radius: 20px;
                box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1);
                margin-bottom: 15px;
                overflow: hidden;
              }
    cards: []
    badges:
      - type: custom:mushroom-chips-card
        chips:
          - type: template
            tap_action:
              action: navigate
              navigation_path: /test-material-3/overview
            icon: m3of:arrow-left-alt
            card_mod:
              style:
                .: |
                  ha-card {
                    --color: {{ 'var(--md-sys-color-on-primary)' }};
                    --chip-background: {{ 'var(--md-sys-color-primary)' }};
                    margin-top: 0.7em;
                  }
    header:
      layout: responsive
      badges_position: top
      badges_wrap: wrap
    background:
      opacity: 90
      alignment: center
      size: cover
      repeat: repeat
      attachment: fixed
      image: null
  - type: sections
    max_columns: 4
    title: BÃ¼ro
    path: buro
    icon: m3of:computer
    sections:
      - type: grid
        cards:
          - type: custom:simple-tabs
            pre-load: true
            active-background: var(--md-sys-color-tertiary)
            active-text-color: var(--md-sys-color-on-tertiary)
            tabs:
              - title: Room
                icon: m3of:home
                card:
                  type: vertical-stack
                  cards:
                    - type: custom:decluttering-card
                      template: mushroom_title_card
                      variables:
                        - title: Lights
                    - type: vertical-stack
                      cards:
                        - type: custom:material-button-card
                          use_default_icon: false
                          use_default_toggle: true
                          use_default_text: true
                          entity: light.buro
                          icon: m3of:lightbulb
                          height: 97
                          control_type: generic
                          dual_icon: true
                          icon_on: m3of:lightbulb
                          icon_off: m3of:light-off
                          cards:
                            - type: horizontal-stack
                              cards:
                                - type: custom:material-button-card
                                  use_default_icon: false
                                  use_default_toggle: true
                                  use_default_text: true
                                  entity: light.buro
                                  height: 97
                                  control_type: generic
                                  dual_icon: true
                                  icon_on: m3of:lightbulb
                                  icon_off: m3of:light-off
                                - type: custom:material-button-card
                                  use_default_icon: false
                                  use_default_toggle: true
                                  use_default_text: true
                                  entity: light.buro
                                  height: 97
                                  control_type: generic
                                  dual_icon: true
                                  icon_on: m3of:lightbulb
                                  icon_off: m3of:light-off
              - title: Active
                icon: m3of:play-circle
                card:
                  type: vertical-stack
                  cards:
                    - type: conditional
                      conditions:
                        - condition: state
                          entity: media_player.buro_roam
                          state: playing
                      card:
                        type: vertical-stack
                        cards:
                          - type: custom:decluttering-card
                            template: mushroom_title_card
                            variables:
                              - title: Speaker
                          - type: custom:decluttering-card
                            template: media_player_card
                            variables:
                              - entity: media_player.buro_roam
                              - icon: m3of:play-circle
                              - tap_action: more-info
    header:
      card:
        type: vertical-stack
        cards:
          - type: custom:decluttering-card
            template: mushroom_room_title_card
            variables:
              - title: BÃ¼ro
      layout: responsive
      badges_position: top
      badges_wrap: wrap
    badges:
      - type: custom:mushroom-chips-card
        chips:
          - type: template
            tap_action:
              action: navigate
              navigation_path: /test-material-3/rooms
            icon: m3of:arrow-left-alt
            card_mod:
              style:
                .: |
                  ha-card {
                    --color: {{ 'var(--md-sys-color-on-primary)'   }};
                    --chip-background: {{ 'var(--md-sys-color-primary)' }};
                    margin-top: 0.7em;
                  }
    cards: []
    subview: true
    background:
      opacity: 90
      alignment: center
      size: cover
      repeat: repeat
      attachment: fixed
      image: null
  - type: sections
    max_columns: 4
    title: Wohnzimmer
    path: wohnzimmer
    icon: m3of:chair
    sections:
      - type: grid
        cards:
          - type: custom:paper-buttons-row
            styles:
              gap: 8px
              justify-content: flex-start
              overflow: scroll
              margin: 12px 0 12px -18px
              padding-left: 18px
              width: calc(100% + 36px)
            extra_styles: |
              ::-webkit-scrollbar {
                display: none;
              }
            buttons:
              - entity: binary_sensor.presence_active_la
                state_icons:
                  'on': m3of:sensor-occupied
                  'off': m3o:sensors-krx-off
                layout: icon_name
                name: Presence Sensor
                tap_action:
                  action: call-service
                  service: script.toggle_presence_sensor_la
                styles:
                  name:
                    color: var(--gray800)
                  button:
                    padding: 12px
                    width: 76px
                    height: 76px
                    flex-basis: 1
                    flex-shrink: 0
                    display: flex
                    background-color: var(--popupBG)
                    border-radius: 24px
                    color: var(--white)
                  icon:
                    '--mdc-icon-size': 26px
                    color: var(--gray800)
              - entity: input_boolean.movie_mode
                state_icons:
                  'on': mdi:movie-open
                  'off': mdi:movie-off-outline
                layout: icon_name
                name: Movie Mode
                tap_action:
                  action: call-service
                  service: script.movie_mode_2
                styles:
                  name:
                    color: var(--gray800)
                  button:
                    padding: 12px
                    width: 76px
                    height: 76px
                    flex-basis: 1
                    flex-shrink: 0
                    display: flex
                    background-color: var(--popupBG)
                    border-radius: 24px
                    color: var(--white)
                  icon:
                    '--mdc-icon-size': 26px
                    color: var(--gray800)
              - icon: m3of:sunny-snowing
                layout: icon_name
                name: Dynamic Daylight
                tap_action:
                  action: call-service
                  service: script.clear_color_temp_override
                styles:
                  name:
                    color: var(--gray800)
                  button:
                    padding: 12px
                    width: 90px
                    height: 76px
                    flex-basis: 1
                    flex-shrink: 0
                    display: flex
                    background-color: var(--popupBG)
                    border-radius: 24px
                  icon:
                    '--mdc-icon-size': 26px
                    color: var(--gray800)
              - icon: mdi:weather-night
                layout: icon_name
                name: Warm White
                tap_action:
                  action: call-service
                  service: script.set_color_temp_to_2700k
                styles:
                  name:
                    color: var(--gray800)
                  button:
                    padding: 12px
                    width: 90px
                    height: 76px
                    flex-basis: 1
                    flex-shrink: 0
                    display: flex
                    background-color: var(--popupBG)
                    border-radius: 24px
                  icon:
                    '--mdc-icon-size': 26px
                    color: var(--gray800)
              - icon: mdi:weather-partly-cloudy
                layout: icon_name
                name: Natural White
                tap_action:
                  action: call-service
                  service: script.set_color_temp_to_4000k
                styles:
                  name:
                    color: var(--gray800)
                  button:
                    padding: 12px
                    width: 90px
                    height: 76px
                    flex-basis: 1
                    flex-shrink: 0
                    display: flex
                    background-color: var(--popupBG)
                    border-radius: 24px
                  icon:
                    '--mdc-icon-size': 26px
                    color: var(--gray800)
              - icon: mdi:weather-sunny
                layout: icon_name
                name: Daylight White
                tap_action:
                  action: call-service
                  service: script.set_color_temp_to_5000k
                styles:
                  name:
                    color: var(--gray800)
                  button:
                    padding: 12px
                    width: 90px
                    height: 76px
                    flex-basis: 1
                    flex-shrink: 0
                    display: flex
                    background-color: var(--popupBG)
                    border-radius: 24px
                  icon:
                    '--mdc-icon-size': 26px
                    color: var(--gray800)
              - icon: mdi:white-balance-sunny
                layout: icon_name
                name: Natural Daylight
                tap_action:
                  action: call-service
                  service: script.set_color_temp_to_6500k
                styles:
                  name:
                    color: var(--gray800)
                  button:
                    padding: 12px
                    width: 90px
                    height: 76px
                    flex-basis: 1
                    flex-shrink: 0
                    display: flex
                    background-color: var(--popupBG)
                    border-radius: 24px
                  icon:
                    '--mdc-icon-size': 26px
                    color: var(--gray800)
          - type: custom:simple-tabs
            pre-load: true
            active-background: var(--md-sys-color-tertiary)
            active-text-color: var(--md-sys-color-on-tertiary)
            tabs:
              - title: Room
                icon: m3of:home
                card:
                  type: vertical-stack
                  cards:
                    - type: custom:decluttering-card
                      template: mushroom_title_card
                      variables:
                        - title: Lights
                    - type: vertical-stack
                      cards:
                        - type: horizontal-stack
                          cards:
                            - type: custom:google-slider-card
                              entity: light.lights_ktc
                              icon: m3of:lightbulb
                              show_percentage: true
                              bold_text: false
                              control_type: light
                            - type: custom:google-slider-card
                              entity: light.lights_dt_only
                              icon: m3of:lightbulb
                              show_percentage: true
                              bold_text: false
                              control_type: light
                        - type: horizontal-stack
                          cards:
                            - type: custom:material-button-card
                              use_default_icon: false
                              entity: switch.kitchen_cabinet_led
                              height: 97
                              control_type: generic
                              dual_icon: true
                              icon_on: mdi:led-strip-variant
                              icon_off: mdi:led-strip-variant-off
                            - type: custom:material-button-card
                              use_default_icon: false
                              entity: switch.table_top_light
                              height: 97
                              control_type: generic
                              icon: m3of:countertops
                        - type: horizontal-stack
                          cards:
                            - type: custom:material-button-card
                              use_default_icon: false
                              entity: switch.table_top_led
                              height: 97
                              control_type: generic
                              dual_icon: true
                              icon_on: mdi:led-strip-variant
                              icon_off: mdi:led-strip-variant-off
                            - type: custom:google-slider-card
                              entity: light.lights_sofa
                              icon: m3of:lightbulb
                              show_percentage: true
                              bold_text: false
                              control_type: light
                        - type: custom:expander-card
                          padding: 0
                          child-margin-top: 0.6em
                          clear: true
                          title-card-button-overlay: true
                          title-card-clickable: true
                          expanded: false
                          title-card:
                            type: custom:mushroom-title-card
                            title: Other Lights
                            card_mod:
                              style: |
                                ha-card {
                                  --title-font-size: 20px !important;
                                   transform: translateY(-16px);
                                }
                          cards:
                            - type: vertical-stack
                              cards:
                                - type: custom:google-slider-card
                                  entity: light.light_scr
                                  icon: m3of:lightbulb
                                  show_percentage: true
                                  bold_text: false
                                  control_type: light
                                - type: horizontal-stack
                                  cards:
                                    - type: custom:material-button-card
                                      use_default_icon: false
                                      entity: switch.patio_main_switch_la
                                      height: 97
                                      control_type: generic
                                      icon: mdi:outdoor-lamp
                                    - type: custom:material-button-card
                                      use_default_icon: false
                                      entity: switch.patio_side_switch_la
                                      height: 97
                                      control_type: generic
                                      icon: mdi:outdoor-lamp
              - title: Climate
                icon: m3of:heat-pump
                card:
                  type: vertical-stack
                  cards:
                    - type: custom:decluttering-card
                      template: mushroom_title_card
                      variables:
                        - title: Climate Control
                    - type: custom:google-climate-card
                      entity: climate.wohnzimmer
                      increase_temp: 1
                      decrease_temp: 1
                      use_material_color: true
                      use_default_icon: true
                      fix_temperature: auto
                      name: ' '
                    - type: horizontal-stack
                      cards:
                        - type: custom:mushroom-template-card
                          entity: sensor.living_area_humidity
                          primary: >-
                            Humidity: {{ states('sensor.living_area_humidity')
                            }}%
                          icon: mdi:water-percent
                          color: >-
                            {% set hum = states('sensor.living_area_humidity') |
                            float(0) %} {% if hum < 31 %}
                              #99332d
                            {% elif hum < 51 %}
                              #228B22
                            {% else %}
                              #99332d
                            {% endif %}
                          features_position: bottom
                        - type: custom:mushroom-chips-card
                          chips:
                            - type: conditional
                              conditions:
                                - condition: numeric_state
                                  entity: sensor.climate_runtime_living_room
                                  above: 0
                              chip:
                                type: template
                                entity: sensor.climate_runtime_living_room
                                icon: mdi:chart-areaspline
                                content: >-
                                  {% set val =
                                  states('sensor.climate_runtime_living_room') |
                                  float(0) %} {% set hours = val | int %} {% set
                                  minutes = ((val - hours) * 60) | round(0) |
                                  int %} {{ hours }}h {{ minutes }}m
                          alignment: end
                          card_mod:
                            style: |
                              ha-card {
                                margin-top: 0.6em
                              }
              - title: Active
                icon: m3of:play-circle
                card:
                  type: vertical-stack
                  cards:
                    - type: custom:decluttering-card
                      template: mushroom_title_subtitle_card
                      variables:
                        - title: Dishwasher Monitoring
                        - subtitle: >-
                            {% set energy =
                            states('sensor.dishwasher_switch_ktc_energy') |
                            float(0) %} Today energy spent is {{ energy |
                            round(2) }} kWh
                    - type: custom:apexcharts-card
                      header:
                        show: true
                        show_states: false
                      graph_span: 24h
                      span:
                        start: day
                      now:
                        show: true
                      apex_config:
                        chart:
                          height: 250
                        stroke:
                          width: 2
                          curve: smooth
                        grid:
                          borderColor: rgba(200,200,200,0.1)
                        legend:
                          show: true
                          position: top
                        xaxis:
                          crosshairs:
                            show: false
                          tooltip:
                            enabled: false
                      series:
                        - entity: sensor.dishwasher_switch_ktc_power
                          name: Power
                          type: area
                          color: '#4CAF50'
                          yaxis_id: power
                          extend_to: false
                          group_by:
                            duration: 5min
                            func: avg
                          stroke_width: 2
                          fill_raw: last
                      yaxis:
                        - id: power
                          min: 0
                          max: auto
                          decimals: 0
                          apex_config:
                            title:
                              text: Power (W)
                        - id: energy
                          opposite: true
                          min: 0
                          max: auto
                          decimals: 2
                          apex_config:
                            title:
                              text: Energy (kWh)
                    - type: conditional
                      conditions:
                        - condition: or
                          conditions:
                            - condition: state
                              entity: switch.rice_cooker_switch_ktc
                              state: 'on'
                            - condition: state
                              entity: switch.blender_switch_ktc
                              state: 'on'
                      card:
                        type: custom:decluttering-card
                        template: mushroom_title_card
                        variables:
                          - title: Switch
                    - type: conditional
                      conditions:
                        - condition: state
                          entity: switch.rice_cooker_switch_ktc
                          state: 'on'
                      card:
                        type: custom:material-button-card
                        use_default_icon: false
                        use_default_toggle: true
                        use_default_text: true
                        entity: switch.rice_cooker_switch_ktc
                        icon: m3of:rice-bowl
                        height: 97
                        control_type: generic
                    - type: conditional
                      conditions:
                        - condition: state
                          entity: switch.blender_switch_ktc
                          state: 'on'
                      card:
                        type: custom:material-button-card
                        use_default_icon: false
                        use_default_toggle: true
                        use_default_text: true
                        entity: switch.blender_switch_ktc
                        icon: m3of:blender
                        height: 97
                        control_type: generic
                    - type: custom:decluttering-card
                      template: open_door_window_title_card
                      variables:
                        - window_entity: binary_sensor.windows_la
                        - door_entity: binary_sensor.doors_la
                    - type: custom:decluttering-card
                      template: open_door_window_chip_card
                      variables:
                        - window_entity: binary_sensor.windows_la
                        - door_entity: binary_sensor.doors_la
      - type: grid
        cards: []
    header:
      card:
        type: vertical-stack
        cards:
          - type: custom:decluttering-card
            template: mushroom_room_title_card
            variables:
              - title: Living
          - type: custom:paper-buttons-row
            styles:
              justify-content: flex-start
              flex-wrap: wrap
              font-size: 0.9em
              line-height: 1.2em
              margin: 0 0 0 6px
              width: 100%
            buttons:
              - layout: name
                name: Room is
                styles:
                  button:
                    flex-basis: 1
                    flex-shrink: 0
                  name:
                    color: var(--primary-text-color)
              - layout: name
                entity: sensor.living_room_temperature
                name: >-
                  {{ states('sensor.living_room_temperature') | float | round(1)
                  }}Â°C
                tap_action:
                  action: more-info
                styles:
                  icon:
                    color: var(--md-sys-color-on-primary)
                  name:
                    color: var(--md-sys-color-on-primary)
                    font-weight: bold
                  button:
                    padding: 2px 8px
                    background-color: var(--md-sys-color-primary)
                    border-radius: 24px
                    flex-basis: 1
                    flex-shrink: 0
                    display: flex
              - layout: name
                name: Â·
                styles:
                  button:
                    flex-basis: 1
                    flex-shrink: 0
                  name:
                    color: var(--primary-text-color)
      layout: responsive
      badges_position: top
      badges_wrap: wrap
    badges:
      - type: custom:mushroom-chips-card
        chips:
          - type: template
            tap_action:
              action: navigate
              navigation_path: /test-material-3/rooms
            icon: m3of:arrow-left-alt
            card_mod:
              style:
                .: |
                  ha-card {
                    --color: {{ 'var(--md-sys-color-on-primary)'   }};
                    --chip-background: {{ 'var(--md-sys-color-primary)' }};
                    margin-top: 0.7em;
                  }
    cards: []
    subview: true
    background:
      opacity: 90
      alignment: center
      size: cover
      repeat: repeat
      attachment: fixed
      image: null
  - type: sections
    max_columns: 4
    icon: m3of:bed
    path: schlafzimmer
    title: Schlafzimmer
    sections:
      - type: grid
        cards:
          - type: custom:paper-buttons-row
            styles:
              gap: 8px
              justify-content: flex-start
              overflow: scroll
              margin: 12px 0 12px -18px
              padding-left: 18px
              width: calc(100% + 36px)
            extra_styles: |
              ::-webkit-scrollbar {
                display: none;
              }
          - type: custom:simple-tabs
            pre-load: true
            active-background: var(--md-sys-color-tertiary)
            active-text-color: var(--md-sys-color-on-tertiary)
            tabs:
              - title: Room
                icon: m3of:home
                card:
                  type: vertical-stack
                  cards:
                    - type: custom:decluttering-card
                      template: mushroom_title_card
                      variables:
                        - title: Lights
                    - type: horizontal-stack
                      cards:
                        - type: custom:google-slider-card
                          entity: light.lights_mbr
                          show_percentage: true
                          bold_text: false
                          control_type: light
                    - type: horizontal-stack
                      cards:
                        - type: custom:material-button-card
                          use_default_icon: false
                          entity: switch.left_bedside_light_switch_mbr
                          height: 97
                          control_type: generic
                          dual_icon: true
                          icon_on: m3of:face-2
                          icon_off: m3o:face-2
                        - type: custom:material-button-card
                          use_default_icon: false
                          entity: switch.right_bedside_light_switch_mbr
                          height: 97
                          control_type: generic
                          dual_icon: true
                          icon_on: m3of:face
                          icon_off: m3o:face
                    - type: horizontal-stack
                      cards:
                        - type: custom:google-slider-card
                          entity: light.makeup_table_led_mbr
                          show_percentage: true
                          bold_text: false
                          control_type: light
                    - type: custom:decluttering-card
                      template: mushroom_title_card
                      variables:
                        - title: Fan
                    - type: custom:material-button-card
                      use_default_icon: false
                      entity: fan.mbrt
                      height: 97
                      control_type: generic
                    - type: custom:expander-card
                      padding: 0
                      child-margin-top: 0.6em
                      clear: true
                      title-card-button-overlay: true
                      title-card-clickable: true
                      expanded: false
                      title-card:
                        type: custom:mushroom-title-card
                        title: Other Lights
                        card_mod:
                          style: |
                            ha-card {
                              --title-font-size: 20px !important;
                               transform: translateY(-16px);
                            }
                      cards:
                        - type: horizontal-stack
                          cards:
                            - type: custom:google-slider-card
                              entity: light.lights_wr
                              show_percentage: true
                              bold_text: false
                              control_type: light
                            - type: custom:material-button-card
                              use_default_icon: false
                              entity: switch.patio_main_switch_la
                              height: 97
                              control_type: generic
                              icon: mdi:outdoor-lamp
                        - type: custom:google-slider-card
                          entity: light.floor_led_wr
                          show_percentage: true
                          bold_text: false
                          control_type: light
              - title: Active
                icon: m3of:play-circle
                conditions:
                  - entity: media_player.master_bedroom_room_speaker
                    state: playing
                card:
                  type: vertical-stack
                  cards:
                    - type: conditional
                      conditions:
                        - condition: state
                          entity: media_player.master_bedroom_room_speaker
                          state: playing
                      card:
                        type: vertical-stack
                        cards:
                          - type: custom:decluttering-card
                            template: mushroom_title_card
                            variables:
                              - title: Speaker
                          - type: custom:decluttering-card
                            template: media_player_card
                            variables:
                              - entity: media_player.multiple_guest_room_speaker
                              - icon: m3of:play-circle
                              - tap_action: more-info   }
    header:
      card:
        type: vertical-stack
        cards:
          - type: custom:decluttering-card
            template: mushroom_room_title_card
            variables:
              - title: Schlafzimmer
          - type: custom:paper-buttons-row
            styles:
              justify-content: flex-start
              flex-wrap: wrap
              font-size: 0.9em
              line-height: 1.2em
              margin: 0 0 0 6px
              width: 100%
            buttons:
              - layout: name
                name: Room is
                styles:
                  button:
                    flex-basis: 1
                    flex-shrink: 0
                  name:
                    color: var(--primary-text-color)
              - layout: name
                name: Â·
                styles:
                  button:
                    flex-basis: 1
                    flex-shrink: 0
                  name:
                    color: var(--primary-text-color)
              - layout: name
                entity: binary_sensor.motion_sensor_mbr_one_occupancy
                name: >
                  {% if
                  is_state('binary_sensor.motion_sensor_mbr_one_occupancy',
                  'off') %}
                    clear
                  {% else %}
                    {{ states('binary_sensor.motion_sensor_mbr_one_occupancy') }}
                  {% endif %}
                tap_action:
                  action: more-info
                styles:
                  icon:
                    color: var(--md-sys-color-on-primary)
                  name:
                    color: var(--md-sys-color-on-primary)
                    font-weight: bold
                  button:
                    padding: 2px 8px
                    background-color: var(--md-sys-color-primary)
                    border-radius: 24px
                    flex-basis: 1
                    flex-shrink: 0
                    display: flex
              - layout: name
                name: since
                styles:
                  button:
                    flex-basis: 1
                    flex-shrink: 0
                  name:
                    color: var(--primary-text-color)
              - layout: name
                entity: binary_sensor.motion_sensor_mbr_one_occupancy
                name: >-
                  {{
                  relative_time(states.binary_sensor.motion_sensor_mbr_one_occupancy.last_updated)
                  }}
                tap_action:
                  action: more-info
                styles:
                  icon:
                    color: var(--md-sys-color-on-primary)
                  name:
                    color: var(--md-sys-color-on-primary)
                    font-weight: bold
                  button:
                    padding: 2px 8px
                    background-color: var(--md-sys-color-primary)
                    border-radius: 24px
                    flex-basis: 1
                    flex-shrink: 0
                    display: flex
              - layout: name
                name: ago.
                styles:
                  button:
                    flex-basis: 1
                    flex-shrink: 0
                  name:
                    color: var(--primary-text-color)
      layout: responsive
      badges_position: top
      badges_wrap: wrap
    badges:
      - type: custom:mushroom-chips-card
        chips:
          - type: template
            tap_action:
              action: navigate
              navigation_path: /test-material-3/rooms
            icon: m3of:arrow-left-alt
            card_mod:
              style:
                .: |
                  ha-card {
                    --color: {{ 'var(--md-sys-color-on-primary)'   }};
                    --chip-background: {{ 'var(--md-sys-color-primary)' }};
                    margin-top: 0.7em;
                  }
    cards: []
    subview: true
    background:
      opacity: 90
      alignment: center
      size: cover
      repeat: repeat
      attachment: fixed
      image: null
    top_margin: false
  - type: sections
    max_columns: 4
    icon: m3of:restaurant
    path: esszimmer
    title: Esszimmer
    sections:
      - type: grid
        cards:
          - type: custom:paper-buttons-row
            styles:
              gap: 8px
              justify-content: flex-start
              overflow: scroll
              margin: 12px 0 12px -18px
              padding-left: 18px
              width: calc(100% + 36px)
            extra_styles: |
              ::-webkit-scrollbar {
                display: none;
              }
          - type: custom:simple-tabs
            pre-load: true
            active-background: var(--md-sys-color-tertiary)
            active-text-color: var(--md-sys-color-on-tertiary)
            tabs:
              - title: Room
                icon: m3of:home
                card:
                  type: vertical-stack
                  cards:
                    - type: custom:decluttering-card
                      template: mushroom_title_card
                      variables:
                        - title: Lights
                    - type: vertical-stack
                      cards:
                        - type: custom:google-slider-card
                          entity: light.lights_br
                          icon: m3of:lightbulb
                          show_percentage: true
                          bold_text: false
                          control_type: light
                        - type: horizontal-stack
                          cards:
                            - type: custom:google-slider-card
                              entity: light.ava_bed_led_br
                              icon: mdi:led-strip-variant
                              show_percentage: true
                              bold_text: false
                              control_type: light
                            - type: custom:google-slider-card
                              entity: light.iyla_bed_led_br
                              icon: mdi:led-strip-variant
                              show_percentage: true
                              bold_text: false
                              control_type: light
              - title: Active
                icon: m3of:play-circle
    badges:
      - type: custom:mushroom-chips-card
        chips:
          - type: template
            tap_action:
              action: navigate
              navigation_path: /test-material-3/rooms
            icon: m3of:arrow-left-alt
            card_mod:
              style:
                .: |
                  ha-card {
                    --color: {{ 'var(--md-sys-color-on-primary)'   }};
                    --chip-background: {{ 'var(--md-sys-color-primary)' }};
                    margin-top: 0.7em;
                  }
    header:
      layout: responsive
      badges_position: top
      badges_wrap: wrap
      card:
        type: vertical-stack
        cards:
          - type: custom:decluttering-card
            template: mushroom_room_title_card
            variables:
              - title: Esszimmer
          - type: custom:paper-buttons-row
            styles:
              justify-content: flex-start
              flex-wrap: wrap
              font-size: 0.9em
              line-height: 1.2em
              margin: 0 0 0 6px
              width: 100%
            buttons:
              - layout: name
                name: Room is
                styles:
                  button:
                    flex-basis: 1
                    flex-shrink: 0
                  name:
                    color: var(--primary-text-color)
              - layout: name
                name: Â·
                styles:
                  button:
                    flex-basis: 1
                    flex-shrink: 0
                  name:
                    color: var(--primary-text-color)
              - layout: name
                entity: binary_sensor.motion_sensor_br_occupancy
                name: >
                  {% if is_state('binary_sensor.motion_sensor_br_occupancy',
                  'off') %}
                    clear
                  {% else %}
                    {{ states('binary_sensor.motion_sensor_br_occupancy') }}
                  {% endif %}
                tap_action:
                  action: more-info
                styles:
                  icon:
                    color: var(--md-sys-color-on-primary)
                  name:
                    color: var(--md-sys-color-on-primary)
                    font-weight: bold
                  button:
                    padding: 2px 8px
                    background-color: var(--md-sys-color-primary)
                    border-radius: 24px
                    flex-basis: 1
                    flex-shrink: 0
                    display: flex
              - layout: name
                name: since
                styles:
                  button:
                    flex-basis: 1
                    flex-shrink: 0
                  name:
                    color: var(--primary-text-color)
              - layout: name
                entity: binary_sensor.motion_sensor_br_occupancy
                name: >-
                  {{
                  relative_time(states.binary_sensor.motion_sensor_br_occupancy.last_updated)
                  }}
                tap_action:
                  action: more-info
                styles:
                  icon:
                    color: var(--md-sys-color-on-primary)
                  name:
                    color: var(--md-sys-color-on-primary)
                    font-weight: bold
                  button:
                    padding: 2px 8px
                    background-color: var(--md-sys-color-primary)
                    border-radius: 24px
                    flex-basis: 1
                    flex-shrink: 0
                    display: flex
              - layout: name
                name: ago.
                styles:
                  button:
                    flex-basis: 1
                    flex-shrink: 0
                  name:
                    color: var(--primary-text-color)
    cards: []
    subview: true
    background:
      opacity: 90
      alignment: center
      size: cover
      repeat: repeat
      attachment: fixed
      image: null
  - type: sections
    max_columns: 4
    title: Kinderzimmer
    path: kinderzimmer
    icon: m3of:person-3
    sections:
      - type: grid
        cards:
          - type: custom:paper-buttons-row
            styles:
              gap: 8px
              justify-content: flex-start
              overflow: scroll
              margin: 12px 0 12px -18px
              padding-left: 18px
              width: calc(100% + 36px)
            extra_styles: |
              ::-webkit-scrollbar {
                display: none;
              }
          - type: custom:simple-tabs
            pre-load: true
            active-background: var(--md-sys-color-tertiary)
            active-text-color: var(--md-sys-color-on-tertiary)
            tabs:
              - title: Room
                icon: m3of:home
                card:
                  type: vertical-stack
                  cards:
                    - type: custom:decluttering-card
                      template: mushroom_title_card
                      variables:
                        - title: Lights
                    - type: vertical-stack
                      cards:
                        - type: custom:google-slider-card
                          entity: light.lights_sgr
                          icon: m3of:lightbulb
                          show_percentage: true
                          bold_text: false
                          control_type: light
                        - type: custom:google-slider-card
                          entity: light.bed_led_sgr
                          icon: mdi:led-strip-variant
                          show_percentage: true
                          bold_text: false
                          control_type: light
              - title: Active
                icon: m3of:play-circle
                conditions:
                  - entity: media_player.multiple_guest_room_speaker
                    state: playing
                card:
                  type: vertical-stack
                  cards:
                    - type: custom:decluttering-card
                      template: open_window_title_card
                      variables:
                        - windows_entity: binary_sensor.windows_sgr
                    - type: custom:decluttering-card
                      template: open_window_chip_card
                      variables:
                        - windows_entity: binary_sensor.windows_sgr
    badges:
      - type: custom:mushroom-chips-card
        chips:
          - type: template
            tap_action:
              action: navigate
              navigation_path: /test-material-3/rooms
            icon: m3of:arrow-left-alt
            card_mod:
              style:
                .: |
                  ha-card {
                    --color: {{ 'var(--md-sys-color-on-primary)'   }};
                    --chip-background: {{ 'var(--md-sys-color-primary)' }};
                    margin-top: 0.7em;
                  }
    header:
      layout: responsive
      badges_position: top
      badges_wrap: wrap
      card:
        type: vertical-stack
        cards:
          - type: custom:decluttering-card
            template: mushroom_room_title_card
            variables:
              - title: Kinderzimmer
          - type: custom:paper-buttons-row
            styles:
              justify-content: flex-start
              flex-wrap: wrap
              font-size: 0.9em
              line-height: 1.2em
              margin: 0 0 0 6px
              width: 100%
            buttons:
              - layout: name
                name: Room is
                styles:
                  button:
                    flex-basis: 1
                    flex-shrink: 0
                  name:
                    color: var(--primary-text-color)
              - layout: name
                name: Â·
                styles:
                  button:
                    flex-basis: 1
                    flex-shrink: 0
                  name:
                    color: var(--primary-text-color)
              - layout: name
                entity: binary_sensor.motion_sensor_sgr_occupancy
                name: >
                  {% if is_state('binary_sensor.motion_sensor_sgr_occupancy',
                  'off') %}
                    clear
                  {% else %}
                    {{ states('binary_sensor.motion_sensor_sgr_occupancy') }}
                  {% endif %}
                tap_action:
                  action: more-info
                styles:
                  icon:
                    color: var(--md-sys-color-on-primary)
                  name:
                    color: var(--md-sys-color-on-primary)
                    font-weight: bold
                  button:
                    padding: 2px 8px
                    background-color: var(--md-sys-color-primary)
                    border-radius: 24px
                    flex-basis: 1
                    flex-shrink: 0
                    display: flex
              - layout: name
                name: since
                styles:
                  button:
                    flex-basis: 1
                    flex-shrink: 0
                  name:
                    color: var(--primary-text-color)
              - layout: name
                entity: binary_sensor.motion_sensor_sgr_occupancy
                name: >-
                  {{
                  relative_time(states.binary_sensor.motion_sensor_sgr_occupancy.last_updated)
                  }}
                tap_action:
                  action: more-info
                styles:
                  icon:
                    color: var(--md-sys-color-on-primary)
                  name:
                    color: var(--md-sys-color-on-primary)
                    font-weight: bold
                  button:
                    padding: 2px 8px
                    background-color: var(--md-sys-color-primary)
                    border-radius: 24px
                    flex-basis: 1
                    flex-shrink: 0
                    display: flex
              - layout: name
                name: ago.
                styles:
                  button:
                    flex-basis: 1
                    flex-shrink: 0
                  name:
                    color: var(--primary-text-color)
    cards: []
    subview: true
    background:
      opacity: 90
      alignment: center
      size: cover
      repeat: repeat
      attachment: fixed
      image: null
  - type: sections
    max_columns: 4
    icon: m3of:groups-2
    path: gang
    title: Multiple Guest
    sections:
      - type: grid
        cards:
          - type: custom:paper-buttons-row
            styles:
              gap: 8px
              justify-content: flex-start
              overflow: scroll
              margin: 12px 0 12px -18px
              padding-left: 18px
              width: calc(100% + 36px)
            extra_styles: |
              ::-webkit-scrollbar {
                display: none;
              }
            buttons:
              - entity: automation.room_presence_multiple_guest_room
                state_icons:
                  'on': m3of:sensor-occupied
                  'off': m3o:sensors-krx-off
                layout: icon_name
                name: Presence Sensor
                tap_action:
                  action: toggle
                styles:
                  name:
                    color: var(--gray800)
                  button:
                    padding: 12px
                    width: 76px
                    height: 76px
                    flex-basis: 1
                    flex-shrink: 0
                    display: flex
                    background-color: var(--popupBG)
                    border-radius: 24px
                    color: var(--white)
                  icon:
                    '--mdc-icon-size': 26px
                    color: var(--gray800)
          - type: custom:simple-tabs
            pre-load: true
            active-background: var(--md-sys-color-tertiary)
            active-text-color: var(--md-sys-color-on-tertiary)
            tabs:
              - title: Room
                icon: m3of:home
                card:
                  type: vertical-stack
                  cards:
                    - type: custom:decluttering-card
                      template: mushroom_title_card
                      variables:
                        - title: Lights
                    - type: vertical-stack
                      cards:
                        - type: custom:google-slider-card
                          entity: light.lights_mgr
                          icon: m3of:lightbulb
                          show_percentage: true
                          bold_text: false
                          control_type: light
                        - type: custom:google-slider-card
                          entity: light.bed_led_mgr
                          icon: mdi:led-strip-variant
                          show_percentage: true
                          bold_text: false
                          control_type: light
              - title: Climate
                icon: m3of:heat-pump
                card:
                  type: vertical-stack
                  cards:
                    - type: custom:decluttering-card
                      template: mushroom_title_card
                      variables:
                        - title: Climate Control
                    - type: custom:google-climate-card
                      entity: climate.multiple_guest_room
                      increase_temp: 1
                      decrease_temp: 1
                      use_material_color: true
                      use_default_icon: true
                      fix_temperature: auto
                      name: ' '
                    - type: horizontal-stack
                      cards:
                        - type: custom:mushroom-template-card
                          entity: sensor.multiple_guest_room_humidity
                          primary: >-
                            Humidity: {{
                            states('sensor.multiple_guest_room_humidity') }}%
                          icon: mdi:water-percent
                          color: >-
                            {% set hum =
                            states('sensor.multiple_guest_room_humidity') |
                            float(0) %} {% if hum < 31 %}
                              #99332d
                            {% elif hum < 51 %}
                              #228B22
                            {% else %}
                              #99332d
                            {% endif %}
                          features_position: bottom
                        - type: custom:mushroom-chips-card
                          chips:
                            - type: conditional
                              conditions:
                                - condition: numeric_state
                                  entity: sensor.climate_runtime_multiple_guest_room
                                  above: 0
                              chip:
                                type: template
                                entity: sensor.climate_runtime_multiple_guest_room
                                icon: mdi:chart-areaspline
                                content: >-
                                  {% set val =
                                  states('sensor.climate_runtime_multiple_guest_room')
                                  | float(0) %} {% set hours = val | int %} {%
                                  set minutes = ((val - hours) * 60) | round(0)
                                  | int %} {{ hours }}h {{ minutes }}m
                          alignment: end
                          card_mod:
                            style: |
                              ha-card {
                                margin-top: 0.6em
                              }
              - title: Active
                icon: m3of:play-circle
                conditions:
                  - entity: media_player.multiple_guest_room_speaker
                    state: playing
                card:
                  type: vertical-stack
                  cards:
                    - type: conditional
                      conditions:
                        - condition: state
                          entity: media_player.multiple_guest_room_speaker
                          state: playing
                      card:
                        type: vertical-stack
                        cards:
                          - type: custom:decluttering-card
                            template: mushroom_title_card
                            variables:
                              - title: Speaker
                          - type: custom:decluttering-card
                            template: media_player_card
                            variables:
                              - entity: media_player.multiple_guest_room_speaker
                              - icon: m3of:play-circle
                              - tap_action: more-info
    badges:
      - type: custom:mushroom-chips-card
        chips:
          - type: template
            tap_action:
              action: navigate
              navigation_path: /test-material-3/rooms
            icon: m3of:arrow-left-alt
            card_mod:
              style:
                .: |
                  ha-card {
                    --color: {{ 'var(--md-sys-color-on-primary)'   }};
                    --chip-background: {{ 'var(--md-sys-color-primary)' }};
                    margin-top: 0.7em;
                  }
    header:
      layout: responsive
      badges_position: top
      badges_wrap: wrap
      card:
        type: vertical-stack
        cards:
          - type: custom:decluttering-card
            template: mushroom_room_title_card
            variables:
              - title: Multiple Guest
          - type: custom:paper-buttons-row
            styles:
              justify-content: flex-start
              flex-wrap: wrap
              font-size: 0.9em
              line-height: 1.2em
              margin: 0 0 0 6px
              width: 100%
            buttons:
              - layout: name
                name: Room is
                styles:
                  button:
                    flex-basis: 1
                    flex-shrink: 0
                  name:
                    color: var(--primary-text-color)
              - layout: name
                entity: sensor.multiple_guest_room_temperature
                name: >-
                  {{ states('sensor.multiple_guest_room_temperature') | float |
                  round(1) }}Â°C
                tap_action:
                  action: more-info
                styles:
                  icon:
                    color: var(--md-sys-color-on-primary)
                  name:
                    color: var(--md-sys-color-on-primary)
                    font-weight: bold
                  button:
                    padding: 2px 8px
                    background-color: var(--md-sys-color-primary)
                    border-radius: 24px
                    flex-basis: 1
                    flex-shrink: 0
                    display: flex
              - layout: name
                name: Â·
                styles:
                  button:
                    flex-basis: 1
                    flex-shrink: 0
                  name:
                    color: var(--primary-text-color)
              - layout: name
                entity: binary_sensor.motion_sensor_mgr_occupancy
                name: >
                  {% if is_state('binary_sensor.motion_sensor_mgr_occupancy',
                  'off') %}
                    clear
                  {% else %}
                    {{ states('binary_sensor.motion_sensor_mgr_occupancy') }}
                  {% endif %}
                tap_action:
                  action: more-info
                styles:
                  icon:
                    color: var(--md-sys-color-on-primary)
                  name:
                    color: var(--md-sys-color-on-primary)
                    font-weight: bold
                  button:
                    padding: 2px 8px
                    background-color: var(--md-sys-color-primary)
                    border-radius: 24px
                    flex-basis: 1
                    flex-shrink: 0
                    display: flex
              - layout: name
                name: since
                styles:
                  button:
                    flex-basis: 1
                    flex-shrink: 0
                  name:
                    color: var(--primary-text-color)
              - layout: name
                entity: binary_sensor.motion_sensor_mgr_occupancy
                name: >-
                  {{
                  relative_time(states.binary_sensor.motion_sensor_mgr_occupancy.last_updated)
                  }}
                tap_action:
                  action: more-info
                styles:
                  icon:
                    color: var(--md-sys-color-on-primary)
                  name:
                    color: var(--md-sys-color-on-primary)
                    font-weight: bold
                  button:
                    padding: 2px 8px
                    background-color: var(--md-sys-color-primary)
                    border-radius: 24px
                    flex-basis: 1
                    flex-shrink: 0
                    display: flex
              - layout: name
                name: ago.
                styles:
                  button:
                    flex-basis: 1
                    flex-shrink: 0
                  name:
                    color: var(--primary-text-color)
    cards: []
    subview: true
    background:
      opacity: 90
      alignment: center
      size: cover
      repeat: repeat
      attachment: fixed
      image: null
  - type: sections
    max_columns: 4
    title: Server
    path: server
    icon: m3of:server-person
    sections:
      - type: grid
        cards:
          - type: vertical-stack
            cards:
              - type: custom:decluttering-card
                template: mushroom_title_subtitle_card
                variables:
                  - title: Proxmox
                  - subtitle: >-
                      {% set cpu = states('sensor.node_pve_cpu_used') | float(0)
                      %}{% set mem =
                      states('sensor.node_pve_memory_used_percentage') |
                      float(0) %}{% set temp =
                      states('sensor.disk_pve_bc511_nvme_sk_hynix_256gb_temperature')
                      | float(0) %}{% if cpu > 75 or mem > 75 or temp > 70 %}ð¥
                      CPU: {{ cpu | round(1) }}% â¢ Memory: {{ mem | round(1) }}%
                      â¢ NVMe: {{ temp | round(1) }}Â°C{% elif cpu > 50 or mem >
                      50 or temp > 55 %}ð§ CPU: {{ cpu | round(1) }}% â¢ Memory:
                      {{ mem | round(1) }}% â¢ NVMe: {{ temp | round(1) }}Â°C{%
                      else %}ð© CPU: {{ cpu | round(1) }}% â¢ Memory: {{ mem |
                      round(1) }}% â¢ NVMe: {{ temp | round(1) }}Â°C{% endif %}
              - type: horizontal-stack
                cards:
                  - type: gauge
                    entity: sensor.disk_pve_bc511_nvme_sk_hynix_256gb_temperature
                    name: SSD Temperature
                    min: 20
                    max: 80
                    severity:
                      green: 40
                      yellow: 55
                      red: 70
                    unit: Â°C
                  - type: gauge
                    entity: sensor.node_pve_memory_used
                    name: Memory Used
                    max: 16.57
                    severity:
                      green: 6
                      yellow: 8
                      red: 12
              - type: custom:decluttering-card
                template: mushroom_title_subtitle_card
                variables:
                  - title: HA OS
                  - subtitle: >-
                      {% set cpu = states('sensor.qemu_haos14_2_100_cpu_used') |
                      float(0) %}{% set mem =
                      states('sensor.qemu_haos14_2_100_memory_used') | float(0)
                      %}{% set health =
                      states('binary_sensor.qemu_haos14_2_100_health') %}{% set
                      boot = states('sensor.qemu_haos14_2_100_last_boot') %}{%
                      if cpu > 75 or mem > 75 or health == 'on' %}ð¥{% elif cpu
                      > 50 or mem > 50 %}ð§{% else %}ð©{% endif %} CPU: {{ cpu |
                      round(1) }}% â¢ MEM: {{ mem | round(1)
                      }}%                                                                                      
                      Health: {{ 'OK' if health == 'off' else 'â'}} â¢ Last Boot:
                      {{ as_timestamp(boot) | timestamp_custom('%d %b %H:%M') }}
              - type: horizontal-stack
                cards:
                  - type: gauge
                    entity: sensor.qemu_haos14_2_100_memory_free
                    name: Memory Free
                    max: 8.59
                    severity:
                      green: 6
                      yellow: 3
                      red: 0
                  - type: gauge
                    entity: sensor.qemu_haos14_2_100_memory_used
                    name: Memory Used
                    max: 8.59
                    severity:
                      green: 3
                      yellow: 4
                      red: 6
      - type: grid
        cards:
          - type: vertical-stack
            cards:
              - type: custom:decluttering-card
                template: mushroom_title_subtitle_card
                variables:
                  - title: Network
                  - subtitle: >-
                      {% set dl = states('sensor.download_speed_mbps') |
                      float(0) %}{% set ul = states('sensor.upload_speed_mbps')
                      | float(0) %}{% set ping =
                      states('sensor.ping_latency_ms') | float(0) %}{% if dl <
                      10 or ul < 2 %}ð¥ Download: {{ dl | round(1) }} Mbps â¢
                      Upload: {{ ul | round(1) }} Mbps â¢ Ping: {{ ping |
                      round(0) }} ms{% elif dl < 30 or ul < 5 %}ð§ Download: {{
                      dl | round(1) }} Mbps â¢ Upload: {{ ul | round(1) }} Mbps â¢
                      Ping: {{ ping | round(0) }} ms{% else %}ð© Download: {{ dl
                      | round(1) }} Mbps â¢ Upload: {{ ul | round(1) }} Mbps â¢
                      Ping: {{ ping | round(0) }} ms{% endif %}
              - type: custom:apexcharts-card
                header:
                  show: true
                  show_states: true
                  colorize_states: true
                graph_span: 24h
                span:
                  end: minute
                apex_config:
                  chart:
                    height: 180
                    toolbar:
                      show: false
                  stroke:
                    width: 2
                  legend:
                    show: false
                  fill:
                    type: gradient
                    gradient:
                      shadeIntensity: 0.4
                      opacityFrom: 0.5
                      opacityTo: 0
                      stops:
                        - 0
                        - 90
                        - 100
                series:
                  - entity: sensor.download_speed_mbps
                    name: Download
                    color: '#42a5f5'
                    type: area
                  - entity: sensor.upload_speed_mbps
                    name: Upload
                    color: '#66bb6a'
                    type: area
          - type: vertical-stack
            cards:
              - type: custom:decluttering-card
                template: mushroom_title_card
                variables:
                  - title: Devices
              - type: custom:auto-entities
                card:
                  type: grid
                  square: false
                  columns: 1
                card_param: cards
                filter:
                  include:
                    - entity_id: '*battery*'
                      state: < 60
                      options:
                        type: custom:mushroom-template-card
                        icon: |
                          {% set v = states(entity) | default(0) | int %}
                          {% if v < 10 %}
                            mdi:battery-alert-variant-outline
                          {% elif v < 25 %}
                            mdi:battery-10
                          {% elif v < 40 %}
                            mdi:battery-30
                          {% elif v < 60 %}
                            mdi:battery-50
                          {% endif %}
                        primary: |
                          {{ states(entity) }}%
                        secondary: |
                          {{ state_attr(entity, 'friendly_name') }} -
                                updated: {{ relative_time(states[entity].last_updated) }} ago
                        icon_color: |
                          {% set v = states(entity) | default(0) | int %}
                          {% if v < 25 %}
                            red
                          {% elif v < 60 %}
                            yellow
                          {% endif %}
                        card_mod:
                          style:
                            mushroom-shape-icon$: |
                              .shape {
                                --shape-color: transparent !important;
                              }
                show_empty: false
                sort:
                  method: friendly_name
    header:
      card:
        type: vertical-stack
        cards:
          - type: custom:decluttering-card
            template: mushroom_room_title_card
            variables:
              - title: Server
          - type: custom:paper-buttons-row
            styles:
              justify-content: flex-start
              flex-wrap: wrap
              font-size: 0.9em
              line-height: 1.2em
              margin: 0 0 0 6px
              width: 100%
            buttons:
              - layout: name
                name: Home Assistant OS
                styles:
                  button:
                    flex-basis: 1
                    flex-shrink: 0
                  name:
                    color: var(--primary-text-color)
              - layout: name
                entity: update.home_assistant_operating_system_update
                name: >-
                  {% if
                  is_state('update.home_assistant_operating_system_update',
                  'off') %}    â Up to date {% else %} ð Update available {%
                  endif %}
                tap_action:
                  action: more-info
                styles:
                  icon:
                    color: var(--md-sys-color-on-primary)
                  name:
                    color: var(--md-sys-color-on-primary)
                    font-weight: bold
                  button:
                    padding: 2px 8px
                    background-color: var(--md-sys-color-primary)
                    border-radius: 24px
                    flex-basis: 1
                    flex-shrink: 0
              - layout: name
                name: Â· Core
                styles:
                  button:
                    flex-basis: 1
                    flex-shrink: 0
                  name:
                    color: var(--primary-text-color)
              - layout: name
                entity: update.home_assistant_core_update
                name: >-
                  {% if is_state('update.home_assistant_core_update', 'off')
                  %}    â Up to date {% else %} ð Update available {% endif %}
                tap_action:
                  action: more-info
                styles:
                  icon:
                    color: var(--md-sys-color-on-primary)
                  name:
                    color: var(--md-sys-color-on-primary)
                    font-weight: bold
                  button:
                    padding: 2px 8px
                    background-color: var(--md-sys-color-primary)
                    border-radius: 24px
                    flex-basis: 1
                    flex-shrink: 0
      layout: responsive
      badges_position: top
      badges_wrap: wrap
    badges:
      - type: custom:mushroom-chips-card
        chips:
          - type: template
            tap_action:
              action: navigate
              navigation_path: /test-material-3/rooms
            icon: m3of:arrow-left-alt
            card_mod:
              style:
                .: |
                  ha-card {
                    --color: {{ 'var(--md-sys-color-on-primary)'   }};
                    --chip-background: {{ 'var(--md-sys-color-primary)' }};
                    margin-top: 0.7em;
                  }
    cards: []
    subview: true
    background:
      opacity: 90
      alignment: center
      size: cover
      repeat: repeat
      attachment: fixed
      image: null
